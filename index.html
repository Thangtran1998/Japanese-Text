<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Trang há»c tiáº¿ng Nháº­t N1</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
  body { font-family: Arial; padding: 20px; max-width: 900px; margin: auto; }
  h1, h2, h3 { color: #2c3e50; }
  .nav a { display: block; margin: 10px 0; font-size: 18px; text-decoration: none; color: #007acc; }
  .section { display: none; border: 1px solid #ccc; padding: 20px; margin-bottom: 30px; border-radius: 10px; }
  ul.submenu { list-style-type: square; margin-top: 15px; padding-left: 20px; }
  ul.submenu li {
    margin: 6px 0;
    cursor: pointer;
  }
  ul.submenu li {
  color: #007acc; /* xanh dÆ°Æ¡ng máº·c Ä‘á»‹nh */
  }
  ul.submenu li:hover {
  cursor: pointer;
    color: #d9534f; /*chuyá»ƒn sang Ä‘á» khi rÃª chuá»™t */
  }
  
  li.clickable {
    cursor: pointer;
  }
  .modal {
    display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%;
    overflow: auto; background-color: rgba(0, 0, 0, 0.4);
  }
  .modal-content {
    background-color: #fff; margin: 15% auto; padding: 20px; border: 1px solid #888;
    width: 80%; max-width: 400px; text-align: center; border-radius: 10px;
  }
  .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
  li.clickable.done::after { content: ' âœ…'; color: green; }
  .score-display {
    color: #2e7d32;
    font-weight: bold;
    font-size: 0.9em;
    margin-left: 5px;
  }
  li[onclick]:hover {
  cursor: pointer;
  color: #1e88e5;
  }
  #testList li {
  color: #007acc; /* mÃ u xanh máº·c Ä‘á»‹nh */
  }
  #testList li:hover {
    cursor: pointer;
    color: #d9534f;
  }
  #grammarTestList li {
  color: #007acc; /* mÃ u xanh máº·c Ä‘á»‹nh */
  }
  #grammarTestList li:hover {
  cursor: pointer;
    color: #d9534f;
  }
  #tryGrammarList li {
  color: #007acc; /* mÃ u xanh máº·c Ä‘á»‹nh */
  }
  #tryGrammarList li:hover {
  cursor: pointer;
    color: #d9534f;
  }
  #resetHistoryBtn {
    margin: 15px 0;
    padding: 10px 15px;
    background-color: #d9534f;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  .pdf-header {
  color: #007acc;
  font-weight: normal;
  cursor: pointer;
  transition: color 0.3s ease;
}

.pdf-header:hover {
  color: #d9534f;
  font-weight: normal; /* Ä‘áº£m báº£o khÃ´ng Ä‘áº­m lÃªn khi hover */
}



</style>
</head>
<body>
  <div id="customModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <p id="modalMessage">ThÃ´ng bÃ¡o</p>
    </div>
  </div>

  <h1>ğŸ“š Trang há»c tiáº¿ng Nháº­t N1</h1>
  <div class="nav">
    <a href="#" onclick="showSection('s1')">1ï¸âƒ£ Luyá»‡n thi N1 giai Ä‘oáº¡n 1</a>
    <a href="#" onclick="showSection('s2')">2ï¸âƒ£ Luyá»‡n thi N1 giai Ä‘oáº¡n 2</a>
    <a href="#" onclick="showSection('s3')">3ï¸âƒ£ KhÃ³a Zoom N1 - ThÃ¡ng 12/2024</a>
    <a href="#" onclick="showSection('s4')">4ï¸âƒ£ Tá»« vá»±ng</a>
  </div>
  <button id="resetHistoryBtn" onclick="resetHistory()">ğŸ—‘ XÃ³a toÃ n bá»™ lá»‹ch sá»­ lÃ m bÃ i</button>

<div class="section" id="s1">
    <h2>1ï¸âƒ£ Luyá»‡n thi N1 giai Ä‘oáº¡n 1</h2>
    <ul class="submenu">
      <li onclick="showModal('KhÃ´ng cÃ³ bÃ i test nÃ o trong thÆ° má»¥c nÃ y, vui lÃ²ng xem tÃ i liá»‡u Ä‘Ã£ táº£i vá» trÃªn mÃ¡y tÃ­nh')">ğŸ“ TÃ i liá»‡u vÃ  lá»™ trÃ¬nh khÃ³a N1 giai Ä‘oáº¡n 1</li>
      <li onclick="showSection('testday1')">ğŸ“ BÃ i test theo ngÃ y cá»§a lá»™ trÃ¬nh 100 ngÃ y</li>
      <li onclick="showSection('grammarTests')">ğŸ“ Ngá»¯ phÃ¡p phÃ¢n loáº¡i theo chá»§ Ä‘iá»ƒm</li>
      <li onclick="showSection('NguPhapCapTocN1')">ğŸ“ Ã”n táº­p ngá»¯ phÃ¡p cáº¥p tá»‘c N1</li>
      <li onclick="showSection('Trynguphap')">ğŸ“ Luyá»‡n nghe Try ngá»¯ phÃ¡p</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Tá»« vá»±ng theo chá»§ Ä‘iá»ƒm</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Nghe tá»« vá»±ng Tango má»—i ngÃ y</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Kanji</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Kanji Master</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Hack nÃ£o Kanji</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Kanji dá»… nháº§m láº«n (Update 12/2023)</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Chá»¯a Ä‘á» thi JLPT cÃ¡c nÄƒm - pháº§n tá»« vá»±ng, ngá»¯ phÃ¡p</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Test kanji tá»•ng há»£p</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Test tá»« vá»±ng tá»•ng há»£p</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Text tá»•ng há»£p kanji tá»« vá»±ng</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Thi chuyÃªn Ä‘á» (hÃ ng tuáº§n) (12/2023)</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Thi thá»­ thÃ¡ng update 12/2023</li>
      <li onclick="showModal('Äang cáº­p nháº­t ná»™i dung...')">ğŸ“ Há»c Zoom 7/2024</li>
    </ul>
</div>


<div class="section" id="s4">
    <h2>4ï¸âƒ£ Tá»« vá»±ng</h2>
    <ul class="submenu">
      <li onclick="showModal('KhÃ´ng cÃ³ bÃ i test nÃ o trong thÆ° má»¥c nÃ y, vui lÃ²ng xem tÃ i liá»‡u Ä‘Ã£ táº£i vá» trÃªn mÃ¡y tÃ­nh')">ğŸ“ N1 Mimikara</li>
      <li onclick="showSection('vocabulary')">ğŸ“ Test tá»« vá»±ng 30 ngÃ y_ThaoLeJP</li>
    </ul>
</div>

<div class="section" id="vocabulary">
    <h2>ğŸ“š 30 ngÃ y test tá»« vá»±ng ThaoLeJp</h2>
    <ul id="vocabularyList"></ul>
</div>



  
  </div>
    <div class="section" id="grammarTests">
    <h2>ğŸ“‚ Ngá»¯ phÃ¡p phÃ¢n loáº¡i theo chá»§ Ä‘iá»ƒm</h2>
    <ul id="grammarTestList"></ul>
  </div>

  <div class="section" id="NguPhapCapTocN1">
    <a href="Thaolejp_Tong hop ngu phap N1.pdf" target="_blank" style="text-decoration: none;">
      <h2 class="pdf-header"><i class="fas fa-file-pdf"></i> Tá»•ng há»£p ngá»¯ phÃ¡p N1</h2>
    </a>
  </div>


  <div class="section" id="Trynguphap">
    <h2>ğŸ§ Luyá»‡n nghe Try ngá»¯ phÃ¡p</h2>
    <ul id="tryGrammarList"></ul> 
  </div>

   <div class="section" id="tuvung_coThao">
    <h2>ğŸ§ Tá»•ng há»£p 30 bÃ i test tá»« vá»±ng ThaoLeJP</h2>
    <ul id="tuvung_coThao_List"></ul> 
  </div>


  <div class="section" id="testday1">
    <h2>ğŸ“˜ BÃ i test theo ngÃ y</h2>
    <ul id="testList"></ul>
  </div>





  <div class="section" id="s2"><h2>2ï¸âƒ£ Luyá»‡n thi N1 giai Ä‘oáº¡n 2</h2><p>Äang cáº­p nháº­t ná»™i dung...</p></div>


  <div class="section" id="s3"><h2>3ï¸âƒ£ KhÃ³a Zoom N1</h2><p>Äang cáº­p nháº­t ná»™i dung...</p></div>

  <script>



    // Luyá»‡n nghe Try ngá»¯ phÃ¡p
const tryGrammarTestsData = [ 
  { id: "TryTest-1", name: "ğŸ“„ N1_Try Test 1.1" },
  { id: "TryTest-21", name: "ğŸ“„ N1_Try Test 1.2" },
  { id: "TryTest-2", name: "ğŸ“„ N1_Try Test 1.3" },
  { id: "TryTest-3", name: "ğŸ“„ N1_Try Test 2.1" },
  { id: "TryTest-22", name: "ğŸ“„ N1_Try Test 2.2" },
  { id: "TryTest-4", name: "ğŸ“„ N1_Try Test 2.3" },
  { id: "TryTest-5", name: "ğŸ“„ N1_Try Test 3.1" },
  { id: "TryTest-23", name: "ğŸ“„ N1_Try Test 3.2" },
  { id: "TryTest-6", name: "ğŸ“„ N1_Try Test 3.3" },
  { id: "TryTest-7", name: "ğŸ“„ N1_Try Test 4.1" },
  { id: "TryTest-24", name: "ğŸ“„ N1_Try Test 4.2" },
  { id: "TryTest-8", name: "ğŸ“„ N1_Try Test 4.3" },
  { id: "TryTest-9", name: "ğŸ“„ N1_Try Test 5.1" },
  { id: "TryTest-25", name: "ğŸ“„ N1_Try Test 5.2" },
  { id: "TryTest-26", name: "ğŸ“„ N1_Try Test 5.3" },
  { id: "TryTest-10", name: "ğŸ“„ N1_Try Test 5.4" },
  { id: "TryTest-11", name: "ğŸ“„ N1_Try Test 6.1" },
  { id: "TryTest-27", name: "ğŸ“„ N1_Try Test 6.2" },
  { id: "TryTest-12", name: "ğŸ“„ N1_Try Test 6.3" },
  { id: "TryTest-13", name: "ğŸ“„ N1_Try Test 7.1" },
  { id: "TryTest-28", name: "ğŸ“„ N1_Try Test 7.2" },
  { id: "TryTest-14", name: "ğŸ“„ N1_Try Test 7.3" },
  { id: "TryTest-15", name: "ğŸ“„ N1_Try Test 8.1" },
  { id: "TryTest-29", name: "ğŸ“„ N1_Try Test 8.2" },
  { id: "TryTest-16", name: "ğŸ“„ N1_Try Test 8.3" },
  { id: "TryTest-17", name: "ğŸ“„ N1_Try Test 9.1" },
  { id: "TryTest-30", name: "ğŸ“„ N1_Try Test 9.2" },
  { id: "TryTest-18", name: "ğŸ“„ N1_Try Test 9.3" },
  { id: "TryTest-19", name: "ğŸ“„ N1_Try Test 10.1" },
  { id: "TryTest-31", name: "ğŸ“„ N1_Try Test 10.2" },
  { id: "TryTest-20", name: "ğŸ“„ N1_Try Test 10.3" },
];

let currentTryGrammarTestId = null;


const grammarTestsData = [
  { id: "test-NguPhapPhanLoaiTheoChuDiem1", name: "ğŸ“„ N1_Test 1_Ngá»¯ phÃ¡p ï½ã¾ã§" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem2", name: "ğŸ“„ N1_Test 2_Ngá»¯ phÃ¡p ã¾ã§ãƒ»ã¨ã“ã‚ãƒ»ãªãŒã‚‰" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem3", name: "ğŸ“„ N1_Test 3_Ngá»¯ phÃ¡p ï½ã¨ã“ã‚ãƒ»ï½ãªãŒã‚‰" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem4", name: "ğŸ“„ N1_Test 4_Ngá»¯ phÃ¡p gáº§n giá»‘ng nh" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem5", name: "ğŸ“„ N1_Test 5_ Ngá»¯ phÃ¡p gáº§n giá»‘ng n" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem6", name: "ğŸ“„ N1_Test 6_máº«u itaru vÃ  cáº¥u trÃºc" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem7", name: "ğŸ“„ N1_Test 7_Ngá»¯ phÃ¡p itaru vÃ  cáº¥u" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem8", name: "ğŸ“„ N1_Test 8_Ngá»¯ phÃ¡p_kagiri vÃ  mo" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem9", name: "ğŸ“„ N1_Test 9_Ngá»¯ phÃ¡p thá»ƒ hiá»‡n káº¿t" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem10", name: "ğŸ“„ N1_Test 10_Máº«u é™ã‚Šï¼‹ã‚’ã‚‚ã£ã¦ Máº«u ngá»¯" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem11", name: "ğŸ“„ N1_Test 11_Máº«u ngá»¯ phÃ¡p thá»ƒ hiá»‡" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem12", name: "ğŸ“„ N1_Test 12_Ngá»¯ phÃ¡p thá»ƒ hiá»‡n tr" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem13", name: "ğŸ“„ N1_Test 13_Máº«u ngá»¯ phÃ¡p thá»ƒ hiá»‡" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem14", name: "ğŸ“„ N1_Test 14_Ngá»¯ phÃ¡p thá»ƒ hiá»‡n lÃ½" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem15", name: "ğŸ“„ N1_Test 15_Ngá»¯ phÃ¡p liÃªn quan Ä‘" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem16", name: "ğŸ“„ N1_Test 16_Máº«u cÃ¢u giá»›i háº¡n" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem17", name: "ğŸ“„ N1_Test 17_Ngá»¯ phÃ¡p máº«u cÃ¢u giá»›" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem18", name: "ğŸ“„ N1_Test 18_Ngá»¯ phÃ¡p Ä‘uÃ´i cÃ¢u 1" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem19", name: "ğŸ“„ N1_Test 19_Ngá»¯ phÃ¡p Ä‘uÃ´i cÃ¢u 2" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem20", name: "ğŸ“„ N1_Test 20_Ngá»¯ phÃ¡p Ä‘uÃ´i cÃ¢u 3" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem21", name: "ğŸ“„ N1_Test 21_Ngá»¯ phÃ¡p Ä‘uÃ´i cÃ¢u 4" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem22", name: "ğŸ“„ N1_Test 22_Ngá»¯ phÃ¡p ã¨ã¯" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem23", name: "ğŸ“„ N1_Test 23_Ngá»¯ phÃ¡p ã¨ããŸã‚‰" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem24", name: "ğŸ“„ N1_Test 24_Ngá»¯ phÃ¡p 1" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem25", name: "ğŸ“„ N1_Test 25_Ngá»¯ phÃ¡p 2" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem26", name: "ğŸ“„ N1_Test 26_Ngá»¯ phÃ¡p 3" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem27", name: "ğŸ“„ N1_Test 27_Ngá»¯ phÃ¡p 4" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem28", name: "ğŸ“„ N1_Test 28_Ã´n táº­p kiáº¿n thá»©c N2" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem29", name: "ğŸ“„ N1_Test 29_Ã´n táº­p kiáº¿n thá»©c N2" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem30", name: "ğŸ“„ N1_Test 30_Ã”n táº­p Ngá»¯ phÃ¡p N1" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem31", name: "ğŸ“„ N1_Test 31_Ä‘iá»n dáº¥u sao_1" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem32", name: "ğŸ“„ N1_Test 32_Äiá»n dáº¥u sao_2" },
  { id: "test-NguPhapPhanLoaiTheoChuDiem33", name: "ğŸ“„ N1_Test 33_Ä‘á»c hiá»ƒu ngá»¯ phÃ¡p.xlsx" },
];


let currentTestId1 = null;



// Dá»¯ liá»‡u tá»« vá»±ng theo chá»§ Ä‘iá»ƒm
    const vocabularyTestsData = [ 
      { id: "vocab-1", name: "ğŸ“„ NgÃ y 1" },
      { id: "vocab-2", name: "ğŸ“„ NgÃ y 2" },
      { id: "vocab-3", name: "ğŸ“„ NgÃ y 3" },
      { id: "vocab-4", name: "ğŸ“„ NgÃ y 4" },
      { id: "vocab-5", name: "ğŸ“„ NgÃ y 5" },
      { id: "vocab-6", name: "ğŸ“„ NgÃ y 6" },
      { id: "vocab-7", name: "ğŸ“„ NgÃ y 7" },
      { id: "vocab-8", name: "ğŸ“„ NgÃ y 8" },
      { id: "vocab-9", name: "ğŸ“„ NgÃ y 9" },
      { id: "vocab-10", name: "ğŸ“„ NgÃ y 10" },
      { id: "vocab-11", name: "ğŸ“„ NgÃ y 11" },
      { id: "vocab-12", name: "ğŸ“„ NgÃ y 12" },
      { id: "vocab-13", name: "ğŸ“„ NgÃ y 13" },
      { id: "vocab-14", name: "ğŸ“„ NgÃ y 14" },
      { id: "vocab-15", name: "ğŸ“„ NgÃ y 15" },
    ];

    let currentVocabularyTestId = null;

    // Hiá»ƒn thá»‹ danh sÃ¡ch tá»« vá»±ng
    function renderVocabularyTests() {
      const vocabularyList = document.getElementById("vocabularyList");

      const doneTests = JSON.parse(localStorage.getItem("doneTests") || "[]");
      const testScores = JSON.parse(localStorage.getItem("testScores") || "{}");

      vocabularyList.innerHTML = "";

      vocabularyTestsData.forEach(test => {
        const li = document.createElement("li");
        li.textContent = test.name;
        li.classList.add("clickable");

        if (doneTests.includes(test.id)) {
          li.classList.add("done");
          const scoreData = testScores[test.id] || { score: 0, total: 1 };
          const percentage = Math.round((scoreData.score / scoreData.total) * 100);
          li.innerHTML += ` <span class="score-display">${percentage}%</span>`;
        }

        li.onclick = () => {
          currentVocabularyTestId = test.id;
          openTestInNewTab(`${test.id}.html`, li);
        };

        vocabularyList.appendChild(li);
      });
    }




// Luyá»‡n nghe Try ngá»¯ phÃ¡p
function renderTryGrammarTests() {
  const tryGrammarList = document.getElementById("tryGrammarList");

  const doneTests = JSON.parse(localStorage.getItem("doneTests") || "[]");
  const testScores = JSON.parse(localStorage.getItem("testScores") || "{}");

  tryGrammarList.innerHTML = "";

  tryGrammarTestsData.forEach(test => {
    const li = document.createElement("li");
    li.textContent = test.name;
    li.classList.add("clickable");

    if (doneTests.includes(test.id)) {
      li.classList.add("done");
      const scoreData = testScores[test.id] || { score: 0, total: 1 };
      const percentage = Math.round((scoreData.score / scoreData.total) * 100);
      li.innerHTML += ` <span class="score-display">${percentage}%</span>`;
    }

    li.onclick = () => {
      currentTryGrammarTestId = test.id;
      openTestInNewTab(`${test.id}.html`, li);
    };

    tryGrammarList.appendChild(li);
  });
}




//Ngá»¯ phÃ¡p phÃ¢n loáº¡i theo chá»§ Ä‘iá»ƒm 
function renderGrammarTests() {
  const grammarList = document.getElementById("grammarTestList");
  const doneTests = JSON.parse(localStorage.getItem("doneTests") || "[]");
  const testScores = JSON.parse(localStorage.getItem("testScores") || "{}");

  grammarList.innerHTML = "";

  grammarTestsData.forEach(test => {
    const li = document.createElement("li");
    li.textContent = test.name;
    li.classList.add("clickable");

    if (doneTests.includes(test.id)) {
      li.classList.add("done");
      const scoreData = testScores[test.id] || { score: 0, total: 1 };
      const percentage = Math.round((scoreData.score / scoreData.total) * 100);
      li.innerHTML += ` <span class="score-display">${percentage}%</span>`;
    }

    li.onclick = () => {
      currentTestId = test.id;
      openTestInNewTab(`${test.id}.html`, li);
    };

    grammarList.appendChild(li);
  });
}




//BÃ i test theo ngÃ y cá»§a lá»™ trÃ¬nh 100 ngÃ y
    const testData = Array.from({ length: 62 }, (_, i) => `ğŸ“˜BÃ i test ngÃ y ${i + 1}`);
    let currentTestId = null;

    function renderTestList() {
      //Láº¥y pháº§n tá»­ HTML cÃ³ id testList.
      const testList = document.getElementById("testList"); //const : Khai bÃ¡o biáº¿n

      //Láº¥y dá»¯ liá»‡u lá»‹ch sá»­ tá»« localStorage:
      //doneTests: danh sÃ¡ch testId Ä‘Ã£ lÃ m xong.
      //testScores: Ä‘iá»ƒm sá»‘ Ä‘Ã£ lÆ°u { testId: { score, total } }.
      const doneTests = JSON.parse(localStorage.getItem("doneTests") || "[]");
      const testScores = JSON.parse(localStorage.getItem("testScores") || "{}");
      
      //XÃ³a toÃ n bá»™ danh sÃ¡ch cÅ© trÆ°á»›c khi render láº¡i.
      testList.innerHTML = "";

      //Láº·p qua tá»«ng bÃ i test trong testData, táº¡o pháº§n tá»­ <li> tÆ°Æ¡ng á»©ng, gÃ¡n class="clickable".
      testData.forEach((test, idx) => {
        const testId = `test-day${idx + 1}`;
        const li = document.createElement("li");
        li.textContent = test;
        li.classList.add("clickable");
        

        //Náº¿u bÃ i test náº±m trong danh sÃ¡ch Ä‘Ã£ lÃ m:
        //ThÃªm class done (Ä‘á»ƒ hiá»ƒn thá»‹ dáº¥u âœ… báº±ng CSS).
        //TÃ­nh pháº§n trÄƒm Ä‘iá»ƒm vÃ  hiá»ƒn thá»‹.
        if (doneTests.includes(testId)) {
          li.classList.add("done");
          const scoreData = testScores[testId] || { score: 0, total: 1 };
          const percentage = Math.round((scoreData.score / scoreData.total) * 100);
          li.innerHTML += ` <span class="score-display">${percentage}%</span>`;
        }
        //GÃ¡n sá»± kiá»‡n click
        li.onclick = () => {
          currentTestId = testId;
          openTestInNewTab(`${testId}.html`, li);
        };
        //Gáº¯n vÃ o DOM
        testList.appendChild(li);
      });
    }





























    function openTestInNewTab(testFile, listItem) {
  window.open(testFile, '_blank');
  const testId = testFile.replace('.html', '');

  // âœ… Ghi nhá»› bÃ i test Ä‘Ã£ má»Ÿ
  let doneTests = JSON.parse(localStorage.getItem("doneTests") || "[]");
  if (!doneTests.includes(testId)) {
    doneTests.push(testId);
    localStorage.setItem("doneTests", JSON.stringify(doneTests));
  }
      
      if (listItem) {
        listItem.classList.add("done");
        // ChÆ°a hiá»ƒn thá»‹ % vÃ¬ chÆ°a cÃ³ Ä‘iá»ƒm
      }
    }

    function showSection(id) {
      document.querySelectorAll('.section').forEach(sec => sec.style.display = 'none');
      const section = document.getElementById(id);
      if (section) section.style.display = 'block';
    }

    function resetHistory() {
      localStorage.removeItem("doneTests");
      localStorage.removeItem("testScores");
      document.querySelectorAll('li.clickable.done').forEach(el => {
        el.classList.remove("done");
        const scoreDisplay = el.querySelector('.score-display');
        if (scoreDisplay) scoreDisplay.remove();
      });
      alert("ÄÃ£ xÃ³a toÃ n bá»™ lá»‹ch sá»­ lÃ m bÃ i.");
    }

    function showModal(msg) {
      document.getElementById('modalMessage').innerText = msg;
      document.getElementById('customModal').style.display = 'block';
    }

    function closeModal() {
      document.getElementById('customModal').style.display = 'none';
    }

    // Láº¯ng nghe message tá»« cÃ¡c tab bÃ i test
    window.addEventListener('message', function(event) {
      if (event.data && event.data.type === 'updateScore') {
        const { testId, score, total } = event.data;
        let testScores = JSON.parse(localStorage.getItem("testScores") || "{}");
        testScores[testId] = { score: score, total: total };
        localStorage.setItem("testScores", JSON.stringify(testScores));
        
        // Cáº­p nháº­t hiá»ƒn thá»‹ Ä‘iá»ƒm
        document.querySelectorAll('li.clickable').forEach(li => {
          if (li.getAttribute('onclick') && li.getAttribute('onclick').includes(testId)) {
            li.classList.add("done");
            const percentage = Math.round((score / total) * 100);
            
            // XÃ³a pháº§n hiá»ƒn thá»‹ Ä‘iá»ƒm cÅ© náº¿u cÃ³
            const oldDisplay = li.querySelector('.score-display');
            if (oldDisplay) oldDisplay.remove();
            
            // ThÃªm pháº§n hiá»ƒn thá»‹ Ä‘iá»ƒm má»›i
            const scoreSpan = document.createElement('span');
            scoreSpan.className = 'score-display';
            scoreSpan.textContent = `${percentage}%`;
            li.appendChild(scoreSpan);
          }
        });
      }
    });

    window.addEventListener("DOMContentLoaded", function() {
      renderTestList();
      renderTryGrammarTests(); 
      renderGrammarTests();
      renderVocabularyTests() 
   
      
      // KhÃ´i phá»¥c tráº¡ng thÃ¡i section Ä‘ang má»Ÿ
      const lastSection = sessionStorage.getItem("lastSection");
      if (lastSection) showSection(lastSection);
    });

    // LÆ°u tráº¡ng thÃ¡i khi Ä‘Ã³ng trang
    window.addEventListener('beforeunload', function() {
      const currentSection = [...document.querySelectorAll('.section')].find(s => s.style.display === 'block');
      if (currentSection) sessionStorage.setItem("lastSection", currentSection.id);
    });
    
    
    

  </script>
</body>
</html>
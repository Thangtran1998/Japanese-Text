<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Test Tá»« Vá»±ng NgÃ y 2</title>
<style>
  
  body { 
    font-family: Arial; 
    padding: 20px; 
    max-width: 900px; 
    margin: auto; 
    overflow-x: hidden;
  }
  h1, h2, h3 { 
    color: #2c3e50; 
  }
  .nav a { 
    display: block; 
    margin: 10px 0; 
    font-size: 18px; 
    text-decoration: none; 
    color: #007acc; 
  }
  .section { 
    border: 1px solid #ccc; 
    padding: 20px; 
    margin-bottom: 30px; 
    border-radius: 10px; 
  }
  .question-block { 
    margin-bottom: 20px; 
    position: relative; /* Cho phÃ©p chá»©a cÃ¡c control gÃ³c pháº£i */
  }
  .answer-option { 
    display: block; 
    margin-bottom: 5px; 
  }
  .answer-option:hover {
    cursor: pointer;/* Di chuá»™t vÃ o Ä‘Ã¡p Ã¡n sáº½ thÃ nh biá»ƒu tÆ°á»£ng bÃ n tay */
  }
  .answer-option:hover {
    cursor: pointer;
    color: #1e88e5;/* Di chuá»™t vÃ o Ä‘Ã¡p Ã¡n sáº½ cÃ³ mÃ u xanh */
  }
  .score-display {
    color: #2e7d32;
    font-weight: bold;
    font-size: 0.9em;
    margin-left: 5px;
  }
  .correct-answer { 
    color: #2e7d32; 
  }
  .wrong-answer { 
    color: #c62828; 
  }
  #quizResult {
    margin: 15px 0;
    padding: 10px;
    background-color: #f5f5f5;
    border-radius: 5px;
  }
  .show-answers-btn {
    margin: 10px 0;
    padding: 8px 15px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  .show-answers-btn:hover {
    background-color: #45a049;
  }
  .timer-container {
    position: sticky;
    top: 10px;
    z-index: 100;
    background-color: white;
    padding: 10px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: inline-block;
    float: right;
    margin-left: 20px;
    transition: all 0.3s ease;
  }
  .timer-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
    justify-content: flex-end;
  }
  .timer-input {
    width: 50px;
    padding: 5px;
    text-align: center;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  .timer-btn {
    padding: 5px 10px;
    background-color: #2196F3;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
  }
  .timer-btn:hover {
    background-color: #0b7dda;
  }
  .timer-display {
    font-size: 24px;
    font-weight: bold;
    color: #d32f2f;
    margin-left: 10px;
    min-width: 80px;
    display: inline-block;
    text-align: center;
  }
  .time-up-alert {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #d32f2f;
    color: white;
    padding: 20px 40px;
    border-radius: 5px;
    font-size: 24px;
    z-index: 1000;
    display: none;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }
  .result-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 1001;
    width: 80%;
    max-width: 500px;
    display: none;
    text-align: center;
  }
  .result-popup h3 {
    color: #2c3e50;
    margin-top: 0;
    font-size: 24px;
  }
  .result-popup .score {
    font-size: 28px;
    font-weight: bold;
    color: #2196F3;
    margin: 15px 0;
  }
  .result-popup .comment {
    font-size: 18px;
    margin-bottom: 20px;
  }
  .close-popup {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 24px;
    cursor: pointer;
    color: #777;
  }
  .close-popup:hover {
    color: #333;
  }
  /* ThÃªm CSS cho pháº§n Ä‘á»c hiá»ƒu */
  .reading-comprehension {
    background-color: #e6f7ff;
    border-left: 4px solid #1890ff;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    position: relative; /* Cho phÃ©p Ä‘áº·t timer & highlight controls */
  }
  .reading-title {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 5px;
    border-bottom: 1px solid #bae7ff;
  }
  .reading-label {
    background-color: #1890ff;
    color: white;
    padding: 3px 10px;
    border-radius: 4px;
    font-weight: bold;
    font-size: 14px;
  }
  .reading-content {
    line-height: 1.6;
    margin-top: 10px;
  }
  .sub-question-container {
    margin: 15px 0;
    padding-left: 20px;
    border-left: 3px solid #e0e0e0;
}

.sub-question-box {
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 5px;
    padding: 12px;
    margin-top: 8px;
}

.sub-question-box p {
    margin: 0 0 10px 0;
    font-weight: bold;
    color: #495057;
}

.sub-question-options {
    margin-top: 10px;
}
  /* ---- Style cho timer nhá» bÃªn trong khá»‘i Ä‘á»c hiá»ƒu ---- */
  .reading-timer-container {
    position: absolute;
    top: 10px;
    right: 10px;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 5px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    z-index: 10;
    display: flex;
    gap: 5px;
    align-items: center;
  }
  .reading-timer-input {
    width: 40px;
    padding: 3px;
    text-align: center;
    border: 1px solid #ccc;
    border-radius: 3px;
    font-size: 12px;
  }
  .reading-timer-btn {
    padding: 3px 6px;
    background-color: #2196F3;
    color: white;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 12px;
  }
  .reading-timer-btn:hover {
    background-color: #0b7dda;
  }
  .reading-timer-display {
    font-size: 14px;
    font-weight: bold;
    color: #d32f2f;
    min-width: 50px;
    text-align: center;
  }
  /* ---- Style cho bá»™ nÃºt highlight ---- */
  .highlight-controls {
    position: absolute;
    top: 50px; /* Náº±m dÆ°á»›i timer */
    right: 10px;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 5px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    z-index: 10;
    display: flex;
    gap: 5px;
    .highlight-controls {
  pointer-events: none;
}
.highlight-controls .highlight-btn {
  pointer-events: auto;
}
  }
  .highlight-btn {
    width: 20px;
    height: 20px;
    border: 1px solid #ccc;
    border-radius: 3px;
    cursor: pointer;
  }
  .highlight-btn.red    { background-color: #e53935; }  /* Äá» */
  .highlight-btn.blue   { background-color: #1e88e5; }  /* Xanh */
  .highlight-btn.purple { background-color: #8e24aa; }  /* TÃ­m */
  .highlight-btn.black  { background-color: #000000; }  /* Äen */
  .highlight-btn:hover  { opacity: 0.8; }

  .highlight-btn.remove-btn {
  background-color: #f5f5f5;
  color: #ff0000;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 12px;
}


/* ThÃªm vÃ o pháº§n style */
#quizControlsContainer {
    position: absolute;
    right: 20px;
    top: 20px;
    width: 250px;
    z-index: 100;
}

#quizControls {
    background-color: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

#quizControls button {
    display: block;
    width: 100%;
    margin-bottom: 10px;
    padding: 8px;
    background-color: #2196F3;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

#quizControls button:hover {
    background-color: #0b7dda;
}





/* Thanh Ä‘iá»u khiá»ƒn chÃ­nh */
#quizControlsContainer {
    position: fixed;
    right: 0;
    top: 100px;
    width: 250px;
    height: auto;
    z-index: 100;
    transition: width 0.3s ease;
    background-color: white;
    border-radius: 8px 0 0 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

/* Tráº¡ng thÃ¡i thu gá»n */
#quizControlsContainer.collapsed {
    width: 15px;
}

/* Ná»™i dung bÃªn trong */
#quizControls {
    padding: 15px;
    transition: opacity 0.3s ease;
}

#quizControlsContainer.collapsed #quizControls {
    opacity: 0;
    pointer-events: none;
}

/* NÃºt mÅ©i tÃªn - QUAN TRá»ŒNG */
.toggle-collapse-btn {
    position: absolute;
    left: -15px;
    top: 50%;
    transform: translateY(-50%);
    width: 15px;
    height: 30px;
    background-color: #2196F3;
    color: white;
    border: none;
    border-radius: 4px 0 0 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 101;
    padding: 0;
    margin: 0;
}

/* MÅ©i tÃªn */
.toggle-collapse-btn .arrow {
    font-size: 10px;
    transition: transform 0.3s ease;
    display: block;
}

/* Xoay mÅ©i tÃªn khi thu gá»n */
#quizControlsContainer.collapsed .toggle-collapse-btn .arrow {
    transform: rotate(180deg);
}

/* Äáº£m báº£o nÃºt khÃ´ng di chuyá»ƒn */
#quizControlsContainer.collapsed .toggle-collapse-btn {
    left: -15px;
    transform: translateY(-50%);
}

.show-answers-btn {
    background-color: #4CAF50 !important;
}

.show-answers-btn:hover {
    background-color: #45a049 !important;
}

#quizHistory {
    max-height: 200px;
    overflow-y: auto;
    padding: 5px;
    margin: 10px 0;
    background-color: #f8f9fa;
    border-radius: 4px;
    border: 1px solid #dee2e6;
}

#quizHistory li {
    margin-bottom: 8px;
    font-size: 13px;
    display: flex;
    justify-content: space-between;
    align-items: center;    /* CÄ‚N GIá»®A CHIá»€U Dá»ŒC */
    padding: 5px;
    background-color: white;
    border-radius: 3px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}


#quizHistory li button {
    background: none !important;
    border: none !important;
    color: #e53935 !important;
    font-size: 20px !important;   /* CÃ³ thá»ƒ tÄƒng giáº£m tÃ¹y Ã½ */
    font-weight: bold;
    padding: 0 6px 0 8px !important;
    margin: 0 !important;
    cursor: pointer;
    box-shadow: none !important;
    outline: none !important;
    display: flex;
    align-items: center;   /* Äáº£m báº£o chÃ­nh giá»¯a */
    line-height: 1;
}

#quizHistory li button:hover {
    color: #b71c1c !important;
    text-decoration: underline;
    background: none !important;
}

#quizControls {
    width: 200px; /* TÄƒng width Ä‘á»ƒ chá»©a ná»™i dung tá»‘t hÆ¡n */
    /* Giá»¯ nguyÃªn cÃ¡c thuá»™c tÃ­nh khÃ¡c */
}
#editKey, #editValue {
    width: 100%;
    padding: 5px;
    margin-bottom: 5px;
    box-sizing: border-box;
}
#quizControlsContainer {
    position: fixed;
    right: 20px;
    top: 100px; /* Vá»‹ trÃ­ ban Ä‘áº§u */
    width: 250px;
    z-index: 100;
    transition: all 0.3s ease; /* Hiá»‡u á»©ng mÆ°á»£t mÃ  */
}

#quizControls {
    background-color: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

/* Thanh Ä‘iá»u khiá»ƒn trÃ¡i - Äá»“ng bá»™ vá»›i thanh pháº£i */
#leftControlsContainer {
    position: fixed;
    left: 0;
    top: 100px;
    width: 250px;
    z-index: 100;
    transition: all 0.3s ease;
    background-color: white;
    border-radius: 0 8px 8px 0;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

/* NÃºt toggle thanh trÃ¡i - Giá»‘ng thanh pháº£i */
.toggle-left-btn {
    position: absolute;
    right: -15px; /* Äá»•i tá»« left sang right */
    top: 50%;
    transform: translateY(-50%);
    width: 15px;
    height: 30px;
    background-color: #2196F3; /* MÃ u xanh giá»‘ng thanh pháº£i */
    color: white;
    border: none;
    border-radius: 0 4px 4px 0; /* Bo gÃ³c ngÆ°á»£c láº¡i */
    cursor: pointer;
    z-index: 101;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.toggle-left-btn .arrow {
    font-size: 10px;
    transition: transform 0.3s ease;
}

/* Tráº¡ng thÃ¡i thu gá»n */
#leftControlsContainer.collapsed {
    width: 15px;
}

#leftControlsContainer.collapsed #leftControls {
    opacity: 0;
    pointer-events: none;
    padding: 0;
}

/* Xoay mÅ©i tÃªn khi thu gá»n - NgÆ°á»£c chiá»u thanh pháº£i */
#leftControlsContainer:not(.collapsed) .toggle-left-btn .arrow {
    transform: rotate(0deg); /* â—€ khi má»Ÿ rá»™ng */
}

#leftControlsContainer.collapsed .toggle-left-btn .arrow {
    transform: rotate(180deg); /* â–¶ khi thu gá»n */
}

/* Ná»™i dung bÃªn trong */
#leftControls {
    padding: 15px;
    transition: opacity 0.3s ease;
}

/* Style riÃªng cho pháº§n cÃ¢u sai */
#wrongAnswersSection {
    margin-top: 10px;
}

#wrongAnswersSection button {
    display: block;
    width: 100%;
    margin-bottom: 8px;
    padding: 8px;
    background-color: #2196F3; /* MÃ u xanh Ä‘á»“ng bá»™ */
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

#wrongAnswersSection button:hover {
    background-color: #0b7dda; /* MÃ u hover Ä‘á»“ng bá»™ */
}

#practiceWrongBtn {
    background-color: #1976D2; /* MÃ u xanh Ä‘áº­m hÆ¡n */
}

#wrongAnswersList {
    margin-top: 10px;
    max-height: 300px;
    overflow-y: auto;
    padding: 10px;
    background-color: #f5f5f5;
    border-radius: 4px;
}
@media (max-width: 768px) {
    #leftControlsContainer, #quizControlsContainer {
        width: 200px;
        top: 80px;
    }
    
    #leftControls {
        height: calc(100vh - 100px);
    }
    
    #leftControlsContainer.collapsed, #quizControlsContainer.collapsed {
        width: 15px;
    }
}

/* CSS cho báº£ng hiá»ƒn thá»‹ cÃ¢u sai */
.wrong-answers-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    font-size: 12px;
    background-color: white;
    border-radius: 4px;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.wrong-answers-table th {
    background-color: #f44336;
    color: white;
    padding: 8px 4px;
    text-align: center;
    font-weight: bold;
    font-size: 11px;
}

.wrong-answers-table td {
    padding: 6px 4px;
    border-bottom: 1px solid #eee;
    text-align: center;
    vertical-align: middle;
}

.wrong-answers-table tr:nth-child(even) {
    background-color: #f9f9f9;
}

.wrong-answers-table tr:hover {
    background-color: #ffebee;
}

.question-preview {
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: 11px;
    text-align: left;
}

.answer-cell {
    font-weight: bold;
    color: #d32f2f;
}

.correct-answer-cell {
    font-weight: bold;
    color: #2e7d32;
}

.time-cell {
    font-size: 10px;
    color: #666;
}

.detail-btn {
    background-color: #2196F3;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 10px;
    font-size: 14px;
}

.detail-btn:hover {
    background-color: #1976D2;
}
/* =========================
   DARK THEME â€“ Gray / Blue / Purple
   ========================= */

body.dark {
  background-color: #1c1f26;       /* xÃ¡m than */
  color: #d6d8dc;                  /* chá»¯ xÃ¡m sÃ¡ng */
}

/* ===== Heading ===== */
body.dark h1,
body.dark h2,
body.dark h3,
body.dark h4 {
  color: #eef0f3;
}

/* ===== Khá»‘i chÃ­nh ===== */
body.dark .section,
body.dark #quizControls,
body.dark #leftControls,
body.dark #quizControlsContainer,
body.dark #leftControlsContainer,
body.dark .timer-container,
body.dark .sub-question-box,
body.dark #quizHistory,
body.dark #wrongAnswersList {
  background-color: #232732;
  border: 1px solid #343a4a;
  box-shadow: 0 2px 12px rgba(0,0,0,0.6);
}

/* ===== Äá»c hiá»ƒu (nháº¥n tÃ­m nháº¹) ===== */
body.dark .reading-comprehension {
  background: linear-gradient(
    135deg,
    #232732,
    #2b2f3d
  );
  border-left: 4px solid #8b7cf6;
}

body.dark .reading-label {
  background-color: #6f61e8;
  color: #ffffff;
}

/* ===== Text & Answer ===== */
body.dark .answer-option {
  color: #d6d8dc;
}

body.dark .answer-option:hover {
  color: #7bb6ff; /* xanh dá»‹u */
}

/* ===== Input ===== */
body.dark input,
body.dark .timer-input,
body.dark .reading-timer-input,
body.dark #editKey,
body.dark #editValue {
  background-color: #1c1f26;
  color: #eef0f3;
  border: 1px solid #3a4054;
}

/* ===== Button ===== */
body.dark button,
body.dark .timer-btn {
  background: linear-gradient(135deg, #4c7cff, #6f61e8);
  color: white;
  border: none;
}

body.dark button:hover,
body.dark .timer-btn:hover {
  filter: brightness(1.1);
}

/* ===== Quiz result ===== */
body.dark #quizResult {
  background-color: #1f2330;
  border-left: 4px solid #4c7cff;
}

/* ===== Highlight controls ===== */
body.dark .highlight-controls,
body.dark .reading-timer-container {
  background-color: #1c1f26;
  border: 1px solid #3a4054;
}

/* ===== Popup ===== */
body.dark .result-popup {
  background-color: #232732;
  color: #eef0f3;
}

body.dark .close-popup {
  color: #bbb;
}
body.dark .close-popup:hover {
  color: white;
}

/* ===== Table (cÃ¢u sai) ===== */
body.dark table,
body.dark .wrong-answers-table {
  background-color: #232732;
}

body.dark .wrong-answers-table tr:nth-child(even) {
  background-color: #1f2330;
}

body.dark .wrong-answers-table tr:hover {
  background-color: #2d3350;
}


</style>
</head>
<body>

  
  <h1>ğŸ“š Test Tá»« Vá»±ng NgÃ y 2<h1>(Tá»•ng sá»‘ cÃ¢u há»i: 40 cÃ¢u)</h1>
  
  <div class="timer-container">
    <div class="timer-controls">
      <input type="number" id="setTimeInput" class="timer-input" placeholder="20" min="1" max="120">
      <button class="timer-btn" onclick="setTimer()">Äáº·t thá»i gian &#9200;</button>
      <button class="timer-btn" onclick="startTimer()">Báº¯t Ä‘áº§u &#8987;</button>
      <span id="timerDisplay" class="timer-display">20:00</span>
    </div>
  </div>

  <button
  type="button"
  id="darkModeToggleBtn"
  class="timer-btn"
  onclick="toggleDarkMode()"
  style="margin: 10px 0;"
>
  ğŸŒ™ Dark Mode
</button>


  
  <div class="section" id="testday1">
    <h2>ğŸ“ Test Tá»« Vá»±ng NgÃ y 2</h2>
    <form id="quizForm"></form>


      <!-- Thanh Ä‘iá»u khiá»ƒn trÃ¡i -->
    <div id="leftControlsContainer">
        <div id="leftControls">
            <div id="wrongAnswersSection">
                <h4>CÃ¢u Ä‘Ã£ sai âŒ</h4>
                <button onclick="showWrongAnswers()">Xem cÃ¢u sai</button>
                <button onclick="practiceWrongAnswers()" id="practiceWrongBtn">Luyá»‡n táº­p</button>
                <button onclick="clearWrongAnswers()">XÃ³a lá»‹ch sá»­</button>
                <div id="wrongAnswersList" class="hidden"></div>
            </div>
        </div>
        <button class="toggle-left-btn" onclick="toggleLeftControls()">
            <span class="arrow">â—€</span> <!-- Äá»•i thÃ nh â—€ -->
        </button>
    </div>

    <div id="quizControlsContainer">
    <button class="toggle-collapse-btn" onclick="toggleControls()">
        <span class="arrow">â–¶</span>
    </button>
    <div id="quizControls">


        <button type="button" onclick="submitQuiz()">Ná»™p bÃ i</button>
        <button type="button" onclick="resetQuiz()">LÃ m láº¡i</button>
        <button id="showAnswersBtn" class="show-answers-btn" onclick="showCorrectAnswers()" style="display: none;">Hiá»‡n Ä‘Ã¡p Ã¡n Ä‘Ãºng</button>
        <div id="quizResult"></div>
        <h4>Lá»‹ch sá»­ lÃ m bÃ i</h4>
        <ul id="quizHistory"></ul>
        <h4>Cáº­p nháº­t Ä‘Ã¡p Ã¡n</h4>
        <input type="text" id="editKey" placeholder="q1">
        <input type="text" id="editValue" placeholder="3">
        <button onclick="updateAnswer()">Cáº­p nháº­t Ä‘Ã¡p Ã¡n</button>
        <button type="button" id="clearAnswersBtn">XÃ³a cáº­p nháº­t Ä‘Ã¡p Ã¡n</button>
    </div>
</div>

    
  <div id="timeUpAlert" class="time-up-alert">
    â° Háº¿t thá»i gian lÃ m bÃ i rÃ²i báº¡n Æ°i &#129402;
  </div>

  <div id="resultPopup" class="result-popup">
    <span class="close-popup" onclick="closeResultPopup()">Ã—</span>
    <h3>Káº¿t quáº£ cá»§a báº¡n Ä‘Ã¢y</h3>
    <div class="score" id="popupScore"></div>
    <div class="comment" id="popupComment"></div>
    <button class="show-answers-btn" onclick="closeResultPopup()">ÄÃ³ng</button>
  </div>

  <script>
      // Ä‘á»c vá», náº¿u chÆ°a cÃ³ thÃ¬ khá»Ÿi thÃ nh object rá»—ng
      window.answers = JSON.parse(localStorage.getItem('customAnswers') || '{}');
          let lastScrollPosition = 0;

      window.addEventListener('scroll', function() {
          const controlsContainer = document.getElementById('quizControlsContainer');
          const currentScrollPosition = window.pageYOffset || document.documentElement.scrollTop;
          
          // Äiá»u chá»‰nh vá»‹ trÃ­ khi cuá»™n
          if (currentScrollPosition > 100) {
              controlsContainer.style.top = '20px'; // Khi cuá»™n xuá»‘ng, dÃ­nh sÃ¡t top
          } else {
              controlsContainer.style.top = '100px'; // Vá»‹ trÃ­ ban Ä‘áº§u
          }
          
          // Hiá»‡u á»©ng má» nháº¹ khi cuá»™n xuá»‘ng
          if (currentScrollPosition > lastScrollPosition) {
              // Äang cuá»™n xuá»‘ng
              controlsContainer.style.opacity = '0.95';
          } else {
              // Äang cuá»™n lÃªn
              controlsContainer.style.opacity = '1';
          }
          
          lastScrollPosition = currentScrollPosition;
      });
    const quizAnswers = {};
    const quizData = [
  {
    number: 1,
    question: 'ç¥–å…ˆ',
    options: ['ï¼‘ ãã›ã‚“', 'ï¼’ ãã†ã›ã‚“', 'ï¼“ ãã—ã‚“', 'ï¼” ãã•ã'],
    answer: '1',
    detail: 'ğŸ”´ ç¥–å…ˆï¼ˆãã›ã‚“ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: ç¥–ï¼ˆTá»”ï¼‰ï¼tá»•, å…ˆï¼ˆTIÃŠNï¼‰ï¼trÆ°á»›c<br>NghÄ©a: Tá»• tiÃªn, Ã´ng bÃ , nhá»¯ng ngÆ°á»i Ä‘i trÆ°á»›c trong dÃ²ng há»<br>ğŸ’¬ VÃ­ dá»¥:<br>1. ç¥–å…ˆã‚’æ•¬ã†ã“ã¨ã¯å¤§åˆ‡ã ã€‚â†’ KÃ­nh trá»ng tá»• tiÃªn lÃ  quan trá»ng.<br>2. ç§ãŸã¡ã®æ–‡åŒ–ã¯ç¥–å…ˆã‹ã‚‰å—ã‘ç¶™ãŒã‚Œã¦ã„ã‚‹ã€‚â†’ VÄƒn hÃ³a cá»§a chÃºng ta Ä‘Æ°á»£c truyá»n tá»« tá»• tiÃªn.<br>3. ç¥–å…ˆã®å¢“ã‚’è¨ªã‚Œã‚‹ã€‚â†’ ThÄƒm má»™ tá»• tiÃªn.<br>ğŸŸ¢ Äá»“ng nghÄ©a: å…ˆç¥–ï¼ˆã›ã‚“ãï¼‰ã€å…ˆäººï¼ˆã›ã‚“ã˜ã‚“ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: å¾Œè£”ï¼ˆã“ã†ãˆã„ï¼‰ï¼háº­u duá»‡<br>ğŸ§  CÃ¡ch nhá»›: ç¥– + å…ˆ = ngÆ°á»i Ä‘i trÆ°á»›c trong dÃ²ng há» â†’ tá»• tiÃªn<br>ğŸ‘‰ TÃ³m láº¡i: ç¥–å…ˆ = tá»• tiÃªn',
    isReading: false
  },
  {
    number: 2,
    question: 'å°Šé‡',
    options: ['ï¼‘ ãã‚“ã¡ã‚‡ã†', 'ï¼’ ãã‚“ã¡ã‚‡ã†', 'ï¼“ ãã¡ã‚‡ã†', 'ï¼” ãã‚“ã˜ã‚…ã†'],
    answer: '2',
    detail: 'ğŸ”´ å°Šé‡ï¼ˆãã‚“ã¡ã‚‡ã†ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: å°Šï¼ˆTÃ”Nï¼‰ï¼tÃ´n, é‡ï¼ˆTRá»ŒNGï¼‰ï¼trá»ng<br>NghÄ©a: TÃ´n trá»ng, Ä‘Ã¡nh giÃ¡ cao ai/cÃ¡i gÃ¬<br>ğŸ’¬ VÃ­ dá»¥:<br>1. ä»–äººã®æ„è¦‹ã‚’å°Šé‡ã™ã‚‹ã€‚â†’ TÃ´n trá»ng Ã½ kiáº¿n ngÆ°á»i khÃ¡c.<br>2. äººæ¨©ã‚’å°Šé‡ã™ã‚‹ã“ã¨ã¯é‡è¦ã ã€‚â†’ Viá»‡c tÃ´n trá»ng nhÃ¢n quyá»n lÃ  quan trá»ng.<br>3. æ•™å¸«ã¯ç”Ÿå¾’ã‚’å°Šé‡ã—ã¦æ¥ã™ã‚‹ã¹ãã ã€‚â†’ GiÃ¡o viÃªn nÃªn tiáº¿p xÃºc tÃ´n trá»ng há»c sinh.<br>ğŸŸ¢ Äá»“ng nghÄ©a: é‡ã‚“ã˜ã‚‹ï¼ˆãŠã‚‚ã‚“ã˜ã‚‹ï¼‰ã€æ•¬ã†ï¼ˆã†ã‚„ã¾ã†ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: è»½è¦–ã™ã‚‹ï¼ˆã‘ã„ã—ã™ã‚‹ï¼‰ï¼khinh thÆ°á»ng<br>ğŸ§  CÃ¡ch nhá»›: å°Š + é‡ = tÃ´n vÃ  trá»ng â†’ tÃ´n trá»ng<br>ğŸ‘‰ TÃ³m láº¡i: å°Šé‡ = tÃ´n trá»ng',
    isReading: false
  },
  {
    number: 3,
    question: 'å¯¾ç­‰',
    options: ['ï¼‘ ãŸã„ã¨', 'ï¼’ ãŸã„ã¨ã‚“', 'ï¼“ ãŸã¨ã„', 'ï¼” ãŸã„ã¨ã†'],
    answer: '4',
    detail: 'ğŸ”´ å¯¾ç­‰ï¼ˆãŸã„ã¨ã†ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: å¯¾ï¼ˆÄá»Iï¼‰ï¼Ä‘á»‘i, ç­‰ï¼ˆÄáº²NGï¼‰ï¼báº±ng<br>NghÄ©a: BÃ¬nh Ä‘áº³ng, ngang hÃ ng<br>ğŸ’¬ VÃ­ dá»¥:<br>1. å¯¾ç­‰ãªç«‹å ´ã§è©±ã™ã€‚â†’ NÃ³i chuyá»‡n á»Ÿ vá»‹ trÃ­ bÃ¬nh Ä‘áº³ng.<br>2. ç”·å¥³ã¯å¯¾ç­‰ã«æ‰±ã‚ã‚Œã‚‹ã¹ãã ã€‚â†’ Nam ná»¯ nÃªn Ä‘Æ°á»£c Ä‘á»‘i xá»­ bÃ¬nh Ä‘áº³ng.<br>3. çµŒæ¸ˆåŠ›ãŒå¯¾ç­‰ã®å›½åŒå£«ã§å”åŠ›ã™ã‚‹ã€‚â†’ CÃ¡c quá»‘c gia cÃ³ nÄƒng lá»±c kinh táº¿ ngang hÃ ng há»£p tÃ¡c.<br>ğŸŸ¢ Äá»“ng nghÄ©a: å¹³ç­‰ï¼ˆã³ã‚‡ã†ã©ã†ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: ä¸å¹³ç­‰ï¼ˆãµã³ã‚‡ã†ã©ã†ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: å¯¾ + ç­‰ = Ä‘á»‘i vÃ  báº±ng â†’ ngang hÃ ng<br>ğŸ‘‰ TÃ³m láº¡i: å¯¾ç­‰ = bÃ¬nh Ä‘áº³ng',
    isReading: false
  },
  {
    number: 4,
    question: 'å˜èº«',
    options: ['ï¼‘ ãŸã‚“ã¿', 'ï¼’ ãŸã—ã‚“', 'ï¼“ ãŸã‚“ã—ã‚“', 'ï¼” ãŸã‚“ã¿ã‚“'],
    answer: '3',
    detail: 'ğŸ”´ å˜èº«ï¼ˆãŸã‚“ã—ã‚“ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: å˜ï¼ˆÄÆ Nï¼‰ï¼Ä‘Æ¡n, èº«ï¼ˆTHÃ‚Nï¼‰ï¼mÃ¬nh<br>NghÄ©a: Má»™t mÃ¬nh, Ä‘á»™c thÃ¢n<br>ğŸ’¬ VÃ­ dá»¥:<br>1. å˜èº«èµ´ä»»ã™ã‚‹ã€‚â†’ Äi cÃ´ng tÃ¡c má»™t mÃ¬nh.<br>2. å˜èº«ã§æµ·å¤–ã«è¡Œãã€‚â†’ Äi nÆ°á»›c ngoÃ i má»™t mÃ¬nh.<br>3. å˜èº«è€…å‘ã‘ã®ã‚¢ãƒ‘ãƒ¼ãƒˆã€‚â†’ CÄƒn há»™ dÃ nh cho ngÆ°á»i sá»‘ng má»™t mÃ¬nh.<br>ğŸŸ¢ Äá»“ng nghÄ©a: ä¸€äººæš®ã‚‰ã—ï¼ˆã²ã¨ã‚Šãã‚‰ã—ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: å®¶æ—åŒä¼´ï¼ˆã‹ããã©ã†ã¯ã‚“ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: å˜ + èº« = chá»‰ má»™t ngÆ°á»i â†’ má»™t mÃ¬nh<br>ğŸ‘‰ TÃ³m láº¡i: å˜èº« = má»™t mÃ¬nh',
    isReading: false
  },
  {
    number: 5,
    question: 'åŒå£«',
    options: ['ï¼‘ ãŠãªã˜ã—', 'ï¼’ ã©ã†ã˜', 'ï¼“ ã©ã†ã—', 'ï¼” ã¨ã†ã—'],
    answer: '3',
    detail: 'ğŸ”´ åŒå£«ï¼ˆã©ã†ã—ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: åŒï¼ˆÄá»’NGï¼‰ï¼cÃ¹ng, å£«ï¼ˆSÄ¨ï¼‰ï¼ngÆ°á»i<br>NghÄ©a: Nhá»¯ng ngÆ°á»i cÃ¹ng loáº¡i, cÃ¹ng hoÃ n cáº£nh<br>ğŸ’¬ VÃ­ dá»¥:<br>1. å­¦ç”ŸåŒå£«ã§åŠ©ã‘åˆã†ã€‚â†’ Nhá»¯ng sinh viÃªn giÃºp nhau.<br>2. å‹äººåŒå£«ã®æ—…è¡Œã€‚â†’ Chuyáº¿n Ä‘i cá»§a báº¡n bÃ¨.<br>3. ç«¶äº‰ç›¸æ‰‹åŒå£«ã§å”åŠ›ã™ã‚‹ã€‚â†’ Há»£p tÃ¡c giá»¯a cÃ¡c Ä‘á»‘i thá»§ cáº¡nh tranh.<br>ğŸŸ¢ Äá»“ng nghÄ©a: ä»²é–“ï¼ˆãªã‹ã¾ï¼‰ã€åŒå¿—ï¼ˆã©ã†ã—ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: æ•µï¼ˆã¦ãï¼‰ï¼káº» thÃ¹<br>ğŸ§  CÃ¡ch nhá»›: åŒ + å£« = cÃ¹ng ngÆ°á»i â†’ cÃ¹ng nhau<br>ğŸ‘‰ TÃ³m láº¡i: åŒå£« = cÃ¹ng nhau, Ä‘á»“ng loáº¡i',
    isReading: false
  },
  {
    number: 6,
    question: 'å¥³æˆ¿',
    options: ['ï¼‘ ã˜ã‚‡ã¼ã†', 'ï¼’ ã«ã‚‡ã†ã¼ã†', 'ï¼“ ã˜ã‚‡ã¼', 'ï¼” ã«ã‚‡ã†ã¼'],
    answer: '2',
    detail: 'ğŸ”´ å¥³æˆ¿ï¼ˆã«ã‚‡ã†ã¼ã†ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: å¥³ï¼ˆNá»®ï¼‰ï¼ná»¯, æˆ¿ï¼ˆPHÃ’NGï¼‰ï¼phÃ²ng<br>NghÄ©a: Vá»£ (thÃ¢n máº­t, cá»• Ä‘iá»ƒn)<br>ğŸ’¬ VÃ­ dá»¥:<br>1. å¥³æˆ¿ã¨è²·ã„ç‰©ã«è¡Œãã€‚â†’ Äi mua sáº¯m vá»›i vá»£.<br>2. å¥³æˆ¿ã®æ‰‹æ–™ç†ã¯ç¾å‘³ã—ã„ã€‚â†’ MÃ³n Äƒn do vá»£ náº¥u ráº¥t ngon.<br>3. æ˜”ã€å¥³æˆ¿ã¨å‘¼ã¶ã®ã¯ä¸€èˆ¬çš„ã ã£ãŸã€‚â†’ NgÃ y xÆ°a, gá»i lÃ  â€œvá»£â€ ráº¥t phá»• biáº¿n.<br>ğŸŸ¢ Äá»“ng nghÄ©a: å¦»ï¼ˆã¤ã¾ï¼‰ã€å«ï¼ˆã‚ˆã‚ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: å¤«ï¼ˆãŠã£ã¨ï¼‰ï¼chá»“ng<br>ğŸ§  CÃ¡ch nhá»›: å¥³ + æˆ¿ = ngÆ°á»i phá»¥ ná»¯ trong nhÃ  â†’ vá»£<br>ğŸ‘‰ TÃ³m láº¡i: å¥³æˆ¿ = vá»£',
    isReading: false
  },
  {
    number: 7,
    question: 'å¹´é…',
    options: ['ï¼‘ ã¨ã—ã°ã„', 'ï¼’ ã¨ã—ã±ã„', 'ï¼“ ã­ã‚“ã°ã„', 'ï¼” ã­ã‚“ã±ã„'],
    answer: '4',
    detail: 'ğŸ”´ å¹´é…ï¼ˆã­ã‚“ã±ã„ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: å¹´ï¼ˆNIÃŠNï¼‰ï¼tuá»•i, é…ï¼ˆPHá»Iï¼‰ï¼phÃ¢n phá»‘i<br>NghÄ©a: NgÆ°á»i cao tuá»•i, lá»›n tuá»•i<br>ğŸ’¬ VÃ­ dá»¥:<br>1. å¹´é…ã®æ–¹ã«æ•¬æ„ã‚’æ‰•ã†ã€‚â†’ KÃ­nh trá»ng ngÆ°á»i lá»›n tuá»•i.<br>2. å¹´é…ã®ç¤¾å“¡ãŒæŒ‡å°ã™ã‚‹ã€‚â†’ NhÃ¢n viÃªn cao tuá»•i hÆ°á»›ng dáº«n.<br>3. å¹´é…è€…å‘ã‘ã®ã‚¤ãƒ™ãƒ³ãƒˆã€‚â†’ Sá»± kiá»‡n dÃ nh cho ngÆ°á»i cao tuá»•i.<br>ğŸŸ¢ Äá»“ng nghÄ©a: é«˜é½¢è€…ï¼ˆã“ã†ã‚Œã„ã—ã‚ƒï¼‰ã€ãŠå¹´å¯„ã‚Šï¼ˆãŠã¨ã—ã‚ˆã‚Šï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: è‹¥è€…ï¼ˆã‚ã‹ã‚‚ã®ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: å¹´ + é… = ngÆ°á»i cÃ³ nhiá»u tuá»•i â†’ lá»›n tuá»•i<br>ğŸ‘‰ TÃ³m láº¡i: å¹´é… = ngÆ°á»i cao tuá»•i',
    isReading: false
  },
  {
    number: 8,
    question: 'äººæŸ„',
    options: ['ï¼‘ ã²ã¨ãŒã‚‰', 'ï¼’ ã²ã¨ã‹ã‚‰', 'ï¼“ ã«ã‚“ãŒã‚‰', 'ï¼” ã˜ã‚“ãŒã‚‰'],
    answer: '1',
    detail: 'ğŸ”´ äººæŸ„ï¼ˆã²ã¨ãŒã‚‰ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: äººï¼ˆNHÃ‚Nï¼‰ï¼ngÆ°á»i, æŸ„ï¼ˆBÃNH/CÃCHï¼‰ï¼tÃ­nh cÃ¡ch<br>NghÄ©a: TÃ­nh cÃ¡ch, pháº©m cháº¥t cá»§a con ngÆ°á»i<br>ğŸ’¬ VÃ­ dá»¥:<br>1. å½¼ã®äººæŸ„ã¯ç´ æ™´ã‚‰ã—ã„ã€‚â†’ TÃ­nh cÃ¡ch anh áº¥y tuyá»‡t vá»i.<br>2. äººæŸ„ã®è‰¯ã„å‹äººã‚’æŒã¤ã€‚â†’ CÃ³ ngÆ°á»i báº¡n vá»›i nhÃ¢n cÃ¡ch tá»‘t.<br>3. é¢æ¥ã§äººæŸ„ãŒè©•ä¾¡ã•ã‚Œã‚‹ã€‚â†’ NhÃ¢n cÃ¡ch Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡ trong buá»•i phá»ng váº¥n.<br>ğŸŸ¢ Äá»“ng nghÄ©a: æ€§æ ¼ï¼ˆã›ã„ã‹ãï¼‰ã€äººæ ¼ï¼ˆã˜ã‚“ã‹ãï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: æ‚ªäººï¼ˆã‚ãã«ã‚“ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: äºº + æŸ„ = cÃ¡ch con ngÆ°á»i â†’ nhÃ¢n cÃ¡ch<br>ğŸ‘‰ TÃ³m láº¡i: äººæŸ„ = nhÃ¢n cÃ¡ch, tÃ­nh cÃ¡ch',
    isReading: false
  },
  {
    number: 9,
    question: 'æ›¾å­«',
    options: ['ï¼‘ ã²ã¾ã“', 'ï¼’ ã²ã¾ã”', 'ï¼“ ã¤ã¾ã”', 'ï¼” ã²ã¾ã”ã†'],
    answer: '2',
    detail: 'ğŸ”´ æ›¾å­«ï¼ˆã²ã¾ã”ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: æ›¾ï¼ˆTáº°NGï¼‰ï¼trÆ°á»›c, å­«ï¼ˆTÃ”Nï¼‰ï¼chÃ¡u<br>NghÄ©a: ChÃ¡u cá»‘, con cá»§a cháº¯t<br>ğŸ’¬ VÃ­ dá»¥:<br>1. æ›¾å­«ã«ä¼šã†ã€‚â†’ Gáº·p chÃ¡u cá»‘.<br>2. æ›¾å­«ã®æˆé•·ã‚’æ¥½ã—ã¿ã«ã—ã¦ã„ã‚‹ã€‚â†’ Mong chá» sá»± trÆ°á»Ÿng thÃ nh cá»§a chÃ¡u cá»‘.<br>3. æ›¾å­«ã¨éŠã¶æ™‚é–“ã¯è²´é‡ã ã€‚â†’ Thá»i gian chÆ¡i vá»›i chÃ¡u cá»‘ ráº¥t quÃ½ giÃ¡.<br>ğŸŸ¢ Äá»“ng nghÄ©a: ç„å­«ï¼ˆã’ã‚“ãã‚“ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: ç¥–å…ˆï¼ˆãã›ã‚“ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: æ›¾ + å­« = chÃ¡u cá»§a chÃ¡u â†’ chÃ¡u cá»‘<br>ğŸ‘‰ TÃ³m láº¡i: æ›¾å­« = chÃ¡u cá»‘',
    isReading: false
  },
  {
    number: 10,
    question: 'æ‡',
    options: ['ï¼‘ ã¶ã¨ã“ã‚', 'ï¼’ ã¶ã“ã“ã‚', 'ï¼“ ãµã“ã“ã‚', 'ï¼” ãµã¨ã“ã‚'],
    answer: '4',
    detail: 'ğŸ”´ æ‡ï¼ˆãµã¨ã“ã‚ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: æ‡ï¼ˆHOÃ€Iï¼‰ï¼ngá»±c/lÃ²ng<br>NghÄ©a: Ngá»±c, lÃ²ng ngÆ°á»i; cÅ©ng chá»‰ sá»± cáº£m xÃºc, hoÃ i niá»‡m<br>ğŸ’¬ VÃ­ dá»¥:<br>1. æ‡ãŒæ·±ã„äººã€‚â†’ NgÆ°á»i cÃ³ táº¥m lÃ²ng rá»™ng má»Ÿ.<br>2. æ˜”ã®æ€ã„å‡ºãŒæ‡ã«æ®‹ã‚‹ã€‚â†’ Ká»· niá»‡m xÆ°a váº«n cÃ²n trong lÃ²ng.<br>3. è²¡å¸ƒã¯æ‡ã«å…¥ã‚Œã‚‹ã€‚â†’ Äá»ƒ vÃ­ trong ngá»±c.<br>ğŸŸ¢ Äá»“ng nghÄ©a: èƒ¸ï¼ˆã‚€ã­ï¼‰ã€å¿ƒï¼ˆã“ã“ã‚ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: å†·æ·¡ï¼ˆã‚Œã„ãŸã‚“ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: HÃ¬nh áº£nh tay Ã´m vÃ o ngá»±c â†’ lÃ²ng<br>ğŸ‘‰ TÃ³m láº¡i: æ‡ = lÃ²ng, táº¥m lÃ²ng',
    isReading: false
  },
  {
    number: 11,
    question: 'åˆ†éš›',
    options: ['ï¼‘ ã¶ã‚“ã–ã„', 'ï¼’ ã¶ã‚“ã•ã„', 'ï¼“ ã¶ã–ã„', 'ï¼” ã¶ã•ã„'],
    answer: '1',
    detail: 'ğŸ”´ åˆ†éš›ï¼ˆã¶ã‚“ã–ã„ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: åˆ†ï¼ˆPHÃ‚Nï¼‰ï¼phÃ¢n, éš›ï¼ˆTáº¾ï¼‰ï¼giá»›i háº¡n<br>NghÄ©a: Äá»‹a vá»‹, vai trÃ², giá»›i háº¡n báº£n thÃ¢n<br>ğŸ’¬ VÃ­ dá»¥:<br>1. è‡ªåˆ†ã®åˆ†éš›ã‚’ã‚ãã¾ãˆã‚‹ã€‚â†’ Biáº¿t giá»›i háº¡n cá»§a báº£n thÃ¢n.<br>2. åˆ†éš›ã‚’ã‚ãã¾ãˆãšã«å£å‡ºã—ã™ã‚‹ãªã€‚â†’ Äá»«ng xen vÃ o chuyá»‡n vÆ°á»£t quÃ¡ vai trÃ².<br>3. ç›®ä¸Šã®äººã«å¯¾ã—ã¦åˆ†éš›ã‚’ã‚ãã¾ãˆã‚‹ã€‚â†’ Biáº¿t giá»¯ chá»«ng má»±c vá»›i ngÆ°á»i trÃªn.<br>ğŸŸ¢ Äá»“ng nghÄ©a: èº«åˆ†ï¼ˆã¿ã¶ã‚“ï¼‰ã€ç«‹å ´ï¼ˆãŸã¡ã°ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: ç„¡ç¤¼ï¼ˆã¶ã‚Œã„ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: PhÃ¢n + giá»›i háº¡n â†’ vai trÃ²/Ä‘á»‹a vá»‹<br>ğŸ‘‰ TÃ³m láº¡i: åˆ†éš› = Ä‘á»‹a vá»‹, vai trÃ²',
    isReading: false
  },
  {
    number: 12,
    question: 'ç„¡è¨€',
    options: ['ï¼‘ ã‚€ã’ã‚“', 'ï¼’ ã‚€ã”ã‚“', 'ï¼“ ã‚€ã“ã¨', 'ï¼” ã‚€ã„ã†'],
    answer: '2',
    detail: 'ğŸ”´ ç„¡è¨€ï¼ˆã‚€ã”ã‚“ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: ç„¡ï¼ˆVÃ”ï¼‰ï¼khÃ´ng, è¨€ï¼ˆNGÃ”Nï¼‰ï¼nÃ³i<br>NghÄ©a: Im láº·ng, khÃ´ng nÃ³i gÃ¬<br>ğŸ’¬ VÃ­ dá»¥:<br>1. ç„¡è¨€ã§ã†ãªãšã„ãŸã€‚â†’ Gáº­t Ä‘áº§u im láº·ng.<br>2. ç„¡è¨€ã®ã¾ã¾å»ã£ã¦è¡Œã£ãŸã€‚â†’ Äi khá»i mÃ  khÃ´ng nÃ³i gÃ¬.<br>3. ç„¡è¨€ã®åœ§åŠ›ã‚’æ„Ÿã˜ã‚‹ã€‚â†’ Cáº£m nháº­n Ã¡p lá»±c im láº·ng.<br>ğŸŸ¢ Äá»“ng nghÄ©a: é»™ã‚‹ï¼ˆã ã¾ã‚‹ï¼‰ã€æ²ˆé»™ï¼ˆã¡ã‚“ã‚‚ãï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: ãŠã—ã‚ƒã¹ã‚Šã€ç™ºè¨€ï¼ˆã¯ã¤ã’ã‚“ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: ç„¡ + è¨€ = khÃ´ng nÃ³i<br>ğŸ‘‰ TÃ³m láº¡i: ç„¡è¨€ = im láº·ng',
    isReading: false
  },
  {
    number: 13,
    question: 'å«',
    options: ['ï¼‘ ã‚ˆã†ã‚', 'ï¼’ ã˜ã‚‡ã‚', 'ï¼“ ã˜ã‚‡ã†ã‚', 'ï¼” ã‚ˆã‚'],
    answer: '4',
    detail: 'ğŸ”´ å«ï¼ˆã‚ˆã‚ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: å«ï¼ˆGIÃï¼‰ï¼con dÃ¢u, vá»£<br>NghÄ©a: Vá»£, con dÃ¢u<br>ğŸ’¬ VÃ­ dá»¥:<br>1. å«ã«æ–™ç†ã‚’æ•™ãˆã‚‹ã€‚â†’ Dáº¡y vá»£ náº¥u Äƒn.<br>2. å«ã¨ã—ã¦å®¶æ—ã«é¦´æŸ“ã‚€ã€‚â†’ HÃ²a nháº­p vá»›i gia Ä‘Ã¬nh nhÆ° má»™t ngÆ°á»i vá»£.<br>3. å«ãŒå®Ÿå®¶ã«å¸°ã‚‹ã€‚â†’ Vá»£ vá» nhÃ  bá»‘ máº¹ Ä‘áº».<br>ğŸŸ¢ Äá»“ng nghÄ©a: å¦»ï¼ˆã¤ã¾ï¼‰ã€å¥³æˆ¿ï¼ˆã«ã‚‡ã†ã¼ã†ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: å¤«ï¼ˆãŠã£ã¨ï¼‰ï¼chá»“ng<br>ğŸ§  CÃ¡ch nhá»›: å« = ngÆ°á»i phá»¥ ná»¯ trong gia Ä‘Ã¬nh chá»“ng â†’ vá»£/con dÃ¢u<br>ğŸ‘‰ TÃ³m láº¡i: å« = vá»£/con dÃ¢u',
    isReading: false
  },
  {
    number: 14,
    question: 'é€£ä¸­',
    options: ['ï¼‘ ã‚Œã‚“ãªã‹', 'ï¼’ ã‚Œã‚“ã¡ã‚…ã†', 'ï¼“ ã‚Œã‚“ã—ã‚…ã†', 'ï¼” ã‚Œã‚“ã¡ã‚…'],
    answer: '2',
    detail: 'ğŸ”´ é€£ä¸­ï¼ˆã‚Œã‚“ã¡ã‚…ã†ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: é€£ï¼ˆLIÃŠNï¼‰ï¼liÃªn, ä¸­ï¼ˆTRUNGï¼‰ï¼trong<br>NghÄ©a: Bá»n, nhÃ³m ngÆ°á»i<br>ğŸ’¬ VÃ­ dá»¥:<br>1. ã‚ã®é€£ä¸­ã¯é¨’ãŒã—ã„ã€‚â†’ Bá»n Ä‘Ã³ ráº¥t á»“n Ã o.<br>2. å­¦ç”Ÿé€£ä¸­ã§æ—…è¡Œã«è¡Œãã€‚â†’ Äi du lá»‹ch vá»›i nhÃ³m sinh viÃªn.<br>3. æ‚ªã„é€£ä¸­ã«å·»ãè¾¼ã¾ã‚Œã‚‹ã€‚â†’ Bá»‹ lÃ´i vÃ o nhÃ³m xáº¥u.<br>ğŸŸ¢ Äá»“ng nghÄ©a: ä»²é–“ï¼ˆãªã‹ã¾ï¼‰ã€ã‚°ãƒ«ãƒ¼ãƒ—<br>ğŸ”´ TrÃ¡i nghÄ©a: å€‹äººï¼ˆã“ã˜ã‚“ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: LiÃªn + trung = nhÃ³m ngÆ°á»i liÃªn káº¿t â†’ nhÃ³m<br>ğŸ‘‰ TÃ³m láº¡i: é€£ä¸­ = nhÃ³m ngÆ°á»i, bá»n',
    isReading: false
  },
  {
    number: 15,
    question: 'è€è‹¥ç”·å¥³',
    options: ['ï¼‘ ã‚ã†ã‚ã‹ãªã‚“ã˜ã‚‡', 'ï¼’ ã‚ã†ã«ãã ã‚“ã˜ã‚‡', 'ï¼“ ã‚ã†ã«ã‚ƒãã ã‚“ã˜ã‚‡', 'ï¼” ã‚ã†ã‚„ããªã‚“ã˜ã‚‡'],
    answer: '3',
    detail: 'ğŸ”´ è€è‹¥ç”·å¥³ï¼ˆã‚ã†ã«ã‚ƒããªã‚“ã«ã‚‡ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: è€ï¼ˆLÃƒOï¼‰ï¼giÃ , è‹¥ï¼ˆNHÆ¯á»¢Cï¼‰ï¼tráº», ç”·ï¼ˆNAMï¼‰ï¼nam, å¥³ï¼ˆNá»®ï¼‰ï¼ná»¯<br>NghÄ©a: Táº¥t cáº£ má»i ngÆ°á»i, tá»« giÃ  Ä‘áº¿n tráº», nam vÃ  ná»¯<br>ğŸ’¬ VÃ­ dá»¥:<br>1. è€è‹¥ç”·å¥³ãŒé›†ã¾ã‚‹ç¥­ã‚Šã€‚â†’ Lá»… há»™i tá»¥ táº­p má»i ngÆ°á»i.<br>2. è€è‹¥ç”·å¥³å•ã‚ãšå‚åŠ ã§ãã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã€‚â†’ Sá»± kiá»‡n ai cÅ©ng cÃ³ thá»ƒ tham gia.<br>3. è€è‹¥ç”·å¥³ã«äººæ°—ã®æ˜ ç”»ã€‚â†’ Bá»™ phim Ä‘Æ°á»£c yÃªu thÃ­ch bá»Ÿi má»i lá»©a tuá»•i.<br>ğŸŸ¢ Äá»“ng nghÄ©a: å…¨ã¦ã®äºº<br>ğŸ”´ TrÃ¡i nghÄ©a: ç‰¹å®šã®å¹´é½¢å±¤<br>ğŸ§  CÃ¡ch nhá»›: GhÃ©p 4 chá»¯ = má»i lá»©a tuá»•i, cáº£ nam láº«n ná»¯<br>ğŸ‘‰ TÃ³m láº¡i: è€è‹¥ç”·å¥³ = táº¥t cáº£ má»i ngÆ°á»i',
    isReading: false
  },
  {
    number: 16,
    question: 'ä»°ã',
    options: ['ï¼‘ ã‚€ã‹ã', 'ï¼’ ã‚ãŠã', 'ï¼“ ã‚ã‚‚ã', 'ï¼” ã„ãŠã'],
    answer: '2',
    detail: 'ğŸ”´ ä»°ãï¼ˆã‚ãŠãï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: ä»°ï¼ˆNGÆ¯á» NGï¼‰ï¼nhÃ¬n lÃªn, tÃ´n kÃ­nh<br>NghÄ©a: NgÆ°á»¡ng má»™, kÃ­nh trá»ng, nhÃ¬n lÃªn<br>ğŸ’¬ VÃ­ dá»¥:<br>1. å…ˆç”Ÿã‚’ä»°ãã€‚â†’ KÃ­nh trá»ng tháº§y.<br>2. å‰å¤§ãªäººç‰©ã‚’ä»°ãã€‚â†’ NgÆ°á»¡ng má»™ ngÆ°á»i vÄ© Ä‘áº¡i.<br>3. æŒ‡å°è€…ã®æ„è¦‹ã‚’ä»°ãã€‚â†’ Nghe theo Ã½ kiáº¿n cá»§a lÃ£nh Ä‘áº¡o.<br>ğŸŸ¢ Äá»“ng nghÄ©a: å°Šæ•¬ã™ã‚‹ï¼ˆãã‚“ã‘ã„ã™ã‚‹ï¼‰ã€æ•¬ã†ï¼ˆã†ã‚„ã¾ã†ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: è»½è”‘ã™ã‚‹ï¼ˆã‘ã„ã¹ã¤ã™ã‚‹ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: ä»° = nhÃ¬n lÃªn â†’ ngÆ°á»¡ng má»™<br>ğŸ‘‰ TÃ³m láº¡i: ä»°ã = kÃ­nh trá»ng, ngÆ°á»¡ng má»™',
    isReading: false
  },
  {
    number: 17,
    question: 'æ¬ºã',
    options: ['ï¼‘ ã‹ã ã‚€ã', 'ï¼’ ã‚ã ã‚€ã', 'ï¼“ ã‚ã•ã‚€ã', 'ï¼” ã‚ã–ã‚€ã'],
    answer: '4',
    detail: 'ğŸ”´ æ¬ºãï¼ˆã‚ã–ã‚€ãï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: æ¬ºï¼ˆKHIï¼‰ï¼lá»«a dá»‘i<br>NghÄ©a: Lá»«a gáº¡t, Ä‘Ã¡nh lá»«a ai<br>ğŸ’¬ VÃ­ dá»¥:<br>1. äººã‚’æ¬ºãè¡Œç‚ºã¯è¨±ã›ãªã„ã€‚â†’ HÃ nh Ä‘á»™ng lá»«a ngÆ°á»i khÃ´ng thá»ƒ tha thá»©.<br>2. è©æ¬ºã§äººã‚’æ¬ºãã€‚â†’ Lá»«a ngÆ°á»i báº±ng hÃ nh vi gian láº­n.<br>3. è‡ªåˆ†ã‚’æ¬ºã„ã¦ã¯ã„ã‘ãªã„ã€‚â†’ KhÃ´ng Ä‘Æ°á»£c tá»± lá»«a dá»‘i báº£n thÃ¢n.<br>ğŸŸ¢ Äá»“ng nghÄ©a: é¨™ã™ï¼ˆã ã¾ã™ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: æ­£ç›´ï¼ˆã—ã‚‡ã†ã˜ãï¼‰<br>ğŸ§  CÃ¡ch nhá»›: æ¬º = lá»«a â†’ Ä‘Ã¡nh lá»«a<br>ğŸ‘‰ TÃ³m láº¡i: æ¬ºã = lá»«a dá»‘i',
    isReading: false
  },
  {
    number: 18,
    question: 'ä¾®ã‚‹',
    options: ['ï¼‘ ã‚ãªã©ã‚‹', 'ï¼’ ãŠãªã©ã‚‹', 'ï¼“ ã‚ã‹ã©ã‚‹', 'ï¼” ãŠã‹ã¨ã‚‹'],
    answer: '1',
    detail: 'ğŸ”´ ä¾®ã‚‹ï¼ˆã‚ãªã©ã‚‹ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: ä¾®ï¼ˆVÅ¨ï¼‰ï¼khinh miá»‡t<br>NghÄ©a: Khinh thÆ°á»ng, coi thÆ°á»ng<br>ğŸ’¬ VÃ­ dá»¥:<br>1. ç›¸æ‰‹ã‚’ä¾®ã£ã¦ã¯ã„ã‘ãªã„ã€‚â†’ KhÃ´ng Ä‘Æ°á»£c khinh thÆ°á»ng Ä‘á»‘i phÆ°Æ¡ng.<br>2. æ•µã‚’ä¾®ã‚‹ã¨è² ã‘ã‚‹ã€‚â†’ Khinh thÆ°á»ng káº» thÃ¹ sáº½ tháº¥t báº¡i.<br>3. ä»–äººã‚’ä¾®ã‚‹æ…‹åº¦ã¯è‰¯ããªã„ã€‚â†’ ThÃ¡i Ä‘á»™ coi thÆ°á»ng ngÆ°á»i khÃ¡c khÃ´ng tá»‘t.<br>ğŸŸ¢ Äá»“ng nghÄ©a: è»½è¦–ã™ã‚‹ï¼ˆã‘ã„ã—ã™ã‚‹ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: å°Šæ•¬ã™ã‚‹ï¼ˆãã‚“ã‘ã„ã™ã‚‹ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: ä¾® = khinh â†’ coi thÆ°á»ng<br>ğŸ‘‰ TÃ³m láº¡i: ä¾®ã‚‹ = khinh thÆ°á»ng',
    isReading: false
  },
  {
    number: 19,
    question: 'æ•¬ã†',
    options: ['ï¼‘ ã†ã‚„ã‚‰ã†', 'ï¼’ ã‚€ã‚„ã¾ã†', 'ï¼“ ã†ã‚„ã¾ã†', 'ï¼” ãã‚„ã¾ã†'],
    answer: '3',
    detail: 'ğŸ”´ æ•¬ã†ï¼ˆã†ã‚„ã¾ã†ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: æ•¬ï¼ˆKÃNHï¼‰ï¼tÃ´n kÃ­nh<br>NghÄ©a: KÃ­nh trá»ng, tÃ´n kÃ­nh ai<br>ğŸ’¬ VÃ­ dá»¥:<br>1. å…ˆè¼©ã‚’æ•¬ã†ã€‚â†’ KÃ­nh trá»ng tiá»n bá»‘i.<br>2. æ–‡åŒ–ã‚’æ•¬ã†å¿ƒã‚’æŒã¤ã€‚â†’ CÃ³ táº¥m lÃ²ng kÃ­nh trá»ng vÄƒn hÃ³a.<br>3. é«˜é½¢è€…ã‚’æ•¬ã†ç¿’æ…£ã€‚â†’ Táº­p quÃ¡n kÃ­nh trá»ng ngÆ°á»i cao tuá»•i.<br>ğŸŸ¢ Äá»“ng nghÄ©a: å°Šé‡ã™ã‚‹ï¼ˆãã‚“ã¡ã‚‡ã†ã™ã‚‹ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: ä¾®ã‚‹ï¼ˆã‚ãªã©ã‚‹ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: æ•¬ = tÃ´n kÃ­nh<br>ğŸ‘‰ TÃ³m láº¡i: æ•¬ã† = kÃ­nh trá»ng',
    isReading: false
  },
  {
    number: 20,
    question: 'æ§ã’ã‚‹',
    options: ['ï¼‘ ã•ã•ãˆã‚‹', 'ï¼’ ã•ã—ãˆã‚‹', 'ï¼“ ã•ã•ã‘ã‚‹', 'ï¼” ã•ã•ã’ã‚‹'],
    answer: '4',
    detail: 'ğŸ”´ æ§ã’ã‚‹ï¼ˆã•ã•ã’ã‚‹ï¼‰<br>ğŸˆ¶ Kanji & HÃ¡n Viá»‡t: æ§ï¼ˆPHá»¦NGï¼‰ï¼dÃ¢ng, trao<br>NghÄ©a: DÃ¢ng, hiáº¿n, cá»‘ng hiáº¿n<br>ğŸ’¬ VÃ­ dá»¥:<br>1. å‘½ã‚’æ§ã’ã‚‹ã€‚â†’ DÃ¢ng cáº£ máº¡ng sá»‘ng.<br>2. ä½œå“ã‚’ç¥ã«æ§ã’ã‚‹ã€‚â†’ DÃ¢ng tÃ¡c pháº©m cho tháº§n.<br>3. å…¨åŠ›ã‚’æ§ã’ã‚‹ã€‚â†’ Dá»‘c toÃ n lá»±c.<br>ğŸŸ¢ Äá»“ng nghÄ©a: ä¾›ãˆã‚‹ï¼ˆããªãˆã‚‹ï¼‰ã€å¥‰ä»•ã™ã‚‹ï¼ˆã»ã†ã—ã™ã‚‹ï¼‰<br>ğŸ”´ TrÃ¡i nghÄ©a: å¥ªã†ï¼ˆã†ã°ã†ï¼‰<br>ğŸ§  CÃ¡ch nhá»›: æ§ = giÆ¡ lÃªn dÃ¢ng â†’ cá»‘ng hiáº¿n<br>ğŸ‘‰ TÃ³m láº¡i: æ§ã’ã‚‹ = dÃ¢ng, hiáº¿n',
    isReading: false
  },
  {
    number: 21,
    question: 'Tá»• tiÃªn',
    options: ['ï¼‘ ç¥–æ¯', 'ï¼’ ç¥–çˆ¶', 'ï¼“ ç¥–èª', 'ï¼” ç¥–å…ˆ'],
    answer: '4',
    detail: '',
    isReading: false
  },
  {
    number: 22,
    question: 'TÃ´n trá»ng',
    options: ['ï¼‘ å°Šé‡', 'ï¼’ å°Šè²´', 'ï¼“ å°Šå‘', 'ï¼” è‡ªå°Š'],
    answer: '1',
    detail: '',
    isReading: false
  },
  {
    number: 23,
    question: 'Ngang báº±ng, bÃ¬nh Ä‘áº³ng',
    options: ['ï¼‘ å¯¾é¢', 'ï¼’ å¯¾è±¡', 'ï¼“ å¯¾ç­‰', 'ï¼” å¯¾ç…§'],
    answer: '3',
    detail: '',
    isReading: false
  },
  {
    number: 24,
    question: 'ÄÆ¡n thÃ¢n, má»™t mÃ¬nh',
    options: ['ï¼‘ å˜èº«', 'ï¼’ å˜ä½', 'ï¼“ ç°¡å˜', 'ï¼” å˜èª'],
    answer: '1',
    detail: '',
    isReading: false
  },
  {
    number: 25,
    question: 'Nhá»¯ng ngÆ°á»i cÃ¹ng nhÃ³m vá»›i nhau',
    options: ['ï¼‘ åŒæ§˜', 'ï¼’ åŒæ„', 'ï¼“ åŒå£«', 'ï¼” å…±åŒ'],
    answer: '3',
    detail: '',
    isReading: false
  },
  {
    number: 26,
    question: 'Vá»£',
    options: ['ï¼‘ å¥³æ€§', 'ï¼’ ç”·å¥³', 'ï¼“ æš–æˆ¿', 'ï¼” å¥³æˆ¿'],
    answer: '4',
    detail: '',
    isReading: false
  },
  {
    number: 27,
    question: 'NgÆ°á»i lá»›n tuá»•i',
    options: ['ï¼‘ å¹´é…', 'ï¼’ å¿ƒé…', 'ï¼“ å¹´å§‹', 'ï¼” å¹´åº¦'],
    answer: '1',
    detail: '',
    isReading: false
  },
  {
    number: 28,
    question: 'TÃ­nh cÃ¡ch',
    options: ['ï¼‘ äººå£', 'ï¼’ äººæŸ„', 'ï¼“ å°æŸ„', 'ï¼” å¤§æŸ„'],
    answer: '2',
    detail: '',
    isReading: false
  },
  {
    number: 29,
    question: 'Cháº¯t',
    options: ['ï¼‘ è¿·å­', 'ï¼’ å­å­«', 'ï¼“ æ›¾å­«', 'ï¼” åŒå­'],
    answer: '3',
    detail: '',
    isReading: false
  },
  {
    number: 30,
    question: 'Táº¥m lÃ²ng',
    options: ['ï¼‘ å¿ƒ', 'ï¼’ å£Š', 'ï¼“ è´', 'ï¼” æ‡'],
    answer: '4',
    detail: '',
    isReading: false
  },
  {
    number: 31,
    question: 'ThÃ¢n pháº­n, Ä‘á»‹a vá»‹ (ThÆ°á»ng dÃ¹ng cho Ä‘Ã¡nh giÃ¡ tiÃªu cá»±c)',
    options: ['ï¼‘ åˆ†é¡', 'ï¼’ åˆ†éš›', 'ï¼“ åˆ†åˆ¥', 'ï¼” åˆ†æ'],
    answer: '2',
    detail: '',
    isReading: false
  },
  {
    number: 32,
    question: 'Im láº·ng',
    options: ['ï¼‘ è¨€èª', 'ï¼’ ç„¡è¨€', 'ï¼“ ç„¡è¦–', 'ï¼” ç„¡å£'],
    answer: '2',
    detail: '',
    isReading: false
  },
  {
    number: 33,
    question: 'Con dÃ¢u',
    options: ['ï¼‘å«', 'ï¼’ å¦¹', 'ï¼“ å§‘', 'ï¼” å¥³'],
    answer: '1',
    detail: '',
    isReading: false
  },
  {
    number: 34,
    question: 'ÄÃ¡m, bá»n (báº¡n bÃ¨ xáº¥u...)',
    options: ['ï¼‘é€£ä¼‘', 'ï¼’ é€£ä¸­', 'ï¼“ é€£çµ¡', 'ï¼” é€£å¸¯'],
    answer: '2',
    detail: '',
    isReading: false
  },
  {
    number: 35,
    question: 'GiÃ  tráº» gÃ¡i trai',
    options: ['ï¼‘è€é’å¥³ç”·', 'ï¼’ è€è‹¥å¥³ç”·', 'ï¼“ è€è‹¥ç”·å¥³', 'ï¼” è€ç”·å¥³è‹¥'],
    answer: '3',
    detail: '',
    isReading: false
  },
  {
    number: 36,
    question: 'NgÆ°á»›c nhÃ¬n lÃªn, tÃ´n kÃ­nh, xin Ã½ kiáº¿n chá»‰ thá»‹ cá»§a ngÆ°á»i bá» trÃªn',
    options: ['ï¼‘ä»°ã', 'ï¼’ è¿ãˆ', 'ï¼“ æŠ‘ãˆ', 'ï¼” ä»°ã'],
    answer: '1',
    detail: '',
    isReading: false
  },
  {
    number: 37,
    question: 'Lá»«a gáº¡t',
    options: ['ï¼‘æ¬ºã', 'ï¼’ æ¬ºãŸ', 'ï¼“ æ¬ºã¦', 'ï¼” æ¬ºã™'],
    answer: '1',
    detail: '',
    isReading: false
  },
  {
    number: 38,
    question: 'Xem thÆ°á»ng',
    options: ['ï¼‘ä¾®ã™', 'ï¼’ ä¾®ã‚‹', 'ï¼“ ä¾®ã—', 'ï¼” ä¾®ã‚€'],
    answer: '2',
    detail: '',
    isReading: false
  },
  {
    number: 39,
    question: 'TÃ´n trá»ng, tÃ´n kÃ­nh',
    options: ['ï¼‘åŸ¹ã†', 'ï¼’ å¥ªã†', 'ï¼“ æ•¬ã†', 'ï¼” æ…•ã†'],
    answer: '3',
    detail: '',
    isReading: false
  },
  {
    number: 40,
    question: 'DÃ nh, dÃ¢ng, hiáº¿n dÃ¢ng, cá»‘ng hiáº¿n',
    options: ['ï¼‘æ§ã’ã‚‹', 'ï¼’ é‚ã’ã‚‹', 'ï¼“ ã‚ã’ã‚‹', 'ï¼” æŠ•ã’ã‚‹'],
    answer: '1',
    detail: '',
    isReading: false
  }
]; 

    let timerInterval;
    let defaultTime = 20;
    let remainingTime = defaultTime * 60;
    let isTimerRunning = false;
    let readingComprehensionCount = 0;

    // LÆ°u trá»¯ timer riÃªng cho má»—i block Ä‘á»c hiá»ƒu
    const readingTimers = {};
    // LÆ°u range Ä‘Ã£ chá»n gáº§n nháº¥t cho má»—i block (máº·c Ä‘á»‹nh null)
    //const savedRanges = {};

    function renderQuiz() {
    const form = document.getElementById('quizForm');
    form.innerHTML = '';
    readingComprehensionCount = 0;
    
    quizData.forEach((q, index) => {
        const div = document.createElement('div');
        div.classList.add('question-block');

        if (q.isReading) {
            readingComprehensionCount++;

            // TÃ¡ch pháº§n sá»‘ thá»© tá»± trÆ°á»›c dáº¥u ". "
            const dotIndex = q.question.indexOf(". ");
            let numPart = "", restText = q.question;
            if (dotIndex > 0) {
                numPart = q.question.substring(0, dotIndex + 1);
                restText = q.question.substring(dotIndex + 2);
            }

            // Táº¡o HTML cho cÃ¡c cÃ¢u há»i phá»¥
            let subQuestionsHtml = '';
            if (q.subQuestions && q.subQuestions.length > 0) {
                subQuestionsHtml = q.subQuestions.map((subQ, subIndex) => `
                    <div class="sub-question-container">
                        <div class="sub-question-box">
                            
                            <p><strong>${subQ.number}.</strong> ${subQ.subQuestion.replace(/\n/g, '<br>')}</p>
                            <span style="font-size:12px;color:#888">[key: q${index + 1}_${subIndex}]</span>
                            <div class="sub-question-options">
                                ${subQ.options.map((opt, optIndex) => `
                                    <label class="answer-option">
                                        <input type="radio" name="q${index + 1}_${subIndex}" value="${optIndex + 1}">
                                        ${opt}
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `).join('');
            }
          div.innerHTML = `
            <div class="reading-comprehension" data-index="${index}">
              <div class="reading-title">
                <span class="reading-label">Äá»c hiá»ƒu ${readingComprehensionCount}</span>
              </div>
              <!-- Timer riÃªng cho reading block -->
              <div class="reading-timer-container" data-timer-index="${index}">
                <input type="number" class="reading-timer-input" id="readTimeInput-${index}" placeholder="1" min="1" max="120">
                <button type="button" class="reading-timer-btn" onclick="setReadingTimer(${index}); event.preventDefault();">Äáº·t</button>
                <button type="button" class="reading-timer-btn" onclick="startReadingTimer(${index}); event.preventDefault();">Báº¯t Ä‘áº§u</button>
                <button type="button" class="reading-timer-btn" onclick="resetReadingTimer(${index}); event.preventDefault();">Reset</button>
                <span class="reading-timer-display" id="readingTimerDisplay-${index}">00:00</span>
              </div>
              <!-- NÃºt highlight mÃ u -->
              <div class="highlight-controls" data-highlight-index="${index}">
                <div class="highlight-btn red"    title="Äá»"   onclick="highlightSelection(${index}, 'red'); event.preventDefault();"></div>
                <div class="highlight-btn blue"   title="Xanh" onclick="highlightSelection(${index}, 'blue'); event.preventDefault();"></div>
                <div class="highlight-btn purple" title="TÃ­m"  onclick="highlightSelection(${index}, 'purple'); event.preventDefault();"></div>
                <div class="highlight-btn black"  title="Äen"  onclick="highlightSelection(${index}, 'black'); event.preventDefault();"></div>
                <div class="highlight-btn remove-btn" title="XÃ³a highlight" onclick="removeHighlights(${index}, 'red'); event.preventDefault();">âŒ</div>
              </div>
              <div class="reading-content" id="readingContent-${index}">
                <p>
                  ${ numPart ? `<strong>${numPart}</strong><br>` : '' }
                  <span id="readingText-${index}">${restText.replace(/\n/g, '<br>')}</span>
                </p>
                     ${subQuestionsHtml}
                    </div>
                </div>
            `;
        // LÆ°u Ä‘Ã¡p Ã¡n cho tá»«ng cÃ¢u há»i phá»¥
            if (q.subQuestions && q.subQuestions.length > 0) {
                q.subQuestions.forEach((subQ, subIndex) => {
                    quizAnswers[`q${index + 1}_${subIndex}`] = subQ.answer;
                });
            }
        } else {
            // Xá»­ lÃ½ cÃ¢u há»i thÆ°á»ng
            div.innerHTML = `<p><strong>${q.number}. ${q.question}</strong></p>`;
            q.options.forEach((opt, i) => {
                const label = document.createElement('label');
                label.classList.add('answer-option');
                label.innerHTML = `<input type="radio" name="q${index + 1}" value="${i + 1}"> ${opt}`;
                div.appendChild(label);
            });

            const detailBtn = document.createElement('button');
            detailBtn.classList.add('detail-btn');
            detailBtn.textContent = 'Xem chi tiáº¿t';
            detailBtn.addEventListener('click', (e) => {
                e.preventDefault(); // NgÄƒn cháº·n sá»± kiá»‡n máº·c Ä‘á»‹nh
                e.stopPropagation(); // NgÄƒn sá»± kiá»‡n lan truyá»n
                showQuestionDetail(index);
            });
            div.appendChild(detailBtn);
            quizAnswers[`q${index + 1}`] = q.answer;
        }
        
        form.appendChild(div);
    });
}

function showQuestionDetail(index) {
    const question = quizData[index];
    const detailValue = question.detail || "KhÃ´ng cÃ³ chi tiáº¿t bá»• sung";
    
    // Táº¡o popup chi tiáº¿t vá»›i style má»›i
    const isDark = document.body.classList.contains('dark');

const detailPopup = document.createElement('div');
detailPopup.style.cssText = `
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: ${isDark ? '#232732' : 'white'};
    color: ${isDark ? '#eef0f3' : '#333'};
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,${isDark ? '0.6' : '0.2'});
    z-index: 1000;
    max-width: 500px;
    width: 90%;
    border: 3px solid ${isDark ? '#6f61e8' : '#ff6b6b'};
    max-height: 80vh;
    overflow: hidden;
`;

    
    detailPopup.innerHTML = `
        <div style="position: relative; height: 100%;">
            <button id="closeDetailPopup" style="
            position: absolute;
            top: 0;
            right: 0;
            background-color: #ff6b6b;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 10;
            transform: translate(-50%, -50%); // Äiá»u chá»‰nh vá»‹ trÃ­
        ">
            âœ•
        </button>

            <div style="
                max-height: calc(80vh - 100px);
                overflow-y: auto;
                padding-right: 10px;
            ">
                <h3 style="color: #ff6b6b; margin-top: 0; border-bottom: 2px solid #ff6b6b; padding-bottom: 10px;">
                    Ná»™i dung chi tiáº¿t
                </h3>
                <p style="
    text-align: left;
    line-height: 1.7;
    color: ${isDark ? '#e6e8ee' : '#333'};
    margin-right: 10px;
    font-size: 15px;
">
    ${detailValue}
</p>

            </div>
        </div>
    `;
    
    document.body.appendChild(detailPopup);

    // HÃ m Ä‘Ã³ng popup
    function closePopup() {
        document.body.removeChild(detailPopup);
        document.removeEventListener('keydown', escHandler);
    }

    // ThÃªm sá»± kiá»‡n click cho nÃºt X
    const closeButton = document.getElementById('closeDetailPopup');
    closeButton.addEventListener('click', closePopup);

    // ThÃªm sá»± kiá»‡n ESC Ä‘á»ƒ Ä‘Ã³ng popup
    const escHandler = (e) => {
        if (e.key === 'Escape') {
            closePopup();
        }
    };
    document.addEventListener('keydown', escHandler);
}


    /***=== CHá»¨C NÄ‚NG TIMER RIÃŠNG CHO Má»–I BLOCK ===***/
    function setReadingTimer(idx) {
      const inputEl = document.getElementById(`readTimeInput-${idx}`);
      const minutes = parseInt(inputEl.value);
      if (isNaN(minutes) || minutes <= 0) {
        alert('Nháº­p sá»‘ phÃºt â‰¥ 1.');
        return;
      }
      readingTimers[idx] = {
        remaining: minutes * 60,
        original: minutes * 60,
        intervalId: null
      };
      updateReadingTimerDisplay(idx);
    }

    function startReadingTimer(idx) {
      if (!readingTimers[idx]) {
        readingTimers[idx] = { remaining: 60, original: 60, intervalId: null };
      }
      if (readingTimers[idx].intervalId) return;
      readingTimers[idx].intervalId = setInterval(() => {
        const timerObj = readingTimers[idx];
        timerObj.remaining--;
        updateReadingTimerDisplay(idx);
        if (timerObj.remaining <= 0) {
          clearInterval(timerObj.intervalId);
          timerObj.intervalId = null;
          showTimeUpAlert(idx);
        }
      }, 1000);
    }

    function resetReadingTimer(idx) {
      const timerObj = readingTimers[idx];
      if (timerObj) {
        if (timerObj.intervalId) {
          clearInterval(timerObj.intervalId);
          timerObj.intervalId = null;
        }
        timerObj.remaining = timerObj.original || 0;
        updateReadingTimerDisplay(idx);
      }
    }

    function updateReadingTimerDisplay(idx) {
      const disp = document.getElementById(`readingTimerDisplay-${idx}`);
      const timerObj = readingTimers[idx] || { remaining: 0 };
      let sec = timerObj.remaining;
      if (sec < 0) sec = 0;
      const m = Math.floor(sec / 60);
      const s = sec % 60;
      disp.textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    }

    function showTimeUpAlert(idx) {
      const readingBlock = document.querySelector(`.reading-comprehension[data-index='${idx}']`);
      if (!readingBlock) return;
        // Láº¥y sá»‘/thá»© tá»± hoáº·c tÃªn Ä‘á»c hiá»ƒu
        const readingLabel = readingBlock.querySelector('.reading-label');
        let readingName = '';
        if (readingLabel) {
          readingName = readingLabel.textContent.trim(); // VÃ­ dá»¥: "Äá»c hiá»ƒu 3"
        } else {
          readingName = `Äá»c hiá»ƒu ${idx + 1}`;
        }
      
      // Táº¡o alert div vá»›i style giá»‘ng thÃ´ng bÃ¡o chÃ­nh
      const alertDiv = document.createElement('div');
      alertDiv.innerHTML = `â° Háº¿t thá»i gian cá»§a <strong>${readingName}</strong> roy báº¡n Æ°i!`;
      alertDiv.style.position = 'fixed';
      alertDiv.style.top = '50%';
      alertDiv.style.left = '50%';
      alertDiv.style.transform = 'translate(-50%, -50%)';
      alertDiv.style.backgroundColor = '#d32f2f';
      alertDiv.style.color = 'white';
      alertDiv.style.padding = '20px 40px';
      alertDiv.style.borderRadius = '5px';
      alertDiv.style.fontSize = '24px';
      alertDiv.style.zIndex = '1000';
      alertDiv.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';
      
      // ThÃªm vÃ o body thay vÃ¬ vÃ o reading block
      document.body.appendChild(alertDiv);
      
      setTimeout(() => {
        alertDiv.remove();
      }, 3000);
    }

    /***=== CHá»¨C NÄ‚NG HIGHLIGHT SAU KHI CHá»ŒN VÄ‚N Báº¢N Rá»’I NHáº¤N NÃšT MÃ€U ===***/
    // Biáº¿n lÆ°u trá»¯ cÃ¡c range Ä‘Ã£ chá»n
const savedRanges = {};

// HÃ m highlight má»›i
// HÃ m highlightSelection sá»­a Ä‘á»•i Ä‘á»ƒ cho phÃ©p re-highlight
function highlightSelection(idx, color) {
  // Láº¥y range Ä‘Ã£ lÆ°u hoáº·c tá»« selection hiá»‡n táº¡i
  const selection = window.getSelection();
  const range = savedRanges[idx] || (selection.rangeCount > 0 ? selection.getRangeAt(0).cloneRange() : null);
  
  if (!range || range.collapsed) {
    alert('Vui lÃ²ng bÃ´i Ä‘en vÄƒn báº£n trong pháº§n Ä‘á»c hiá»ƒu trÆ°á»›c khi Ä‘á»•i mÃ u.');
    return;
  }

  // Kiá»ƒm tra cÃ³ náº±m trong pháº§n Ä‘á»c hiá»ƒu Ä‘Ãºng khÃ´ng
  const readingBlock = document.querySelector(`.reading-comprehension[data-index="${idx}"]`);
  if (!readingBlock || !readingBlock.contains(range.commonAncestorContainer)) {
    alert('Vui lÃ²ng chá»n vÄƒn báº£n trong pháº§n Ä‘á»c hiá»ƒu tÆ°Æ¡ng á»©ng.');
    return;
  }

  // Táº¡o document fragment má»›i
  const fragment = range.extractContents();
  
  // Táº¡o span má»›i vá»›i style
  const span = document.createElement('span');
  span.style.color = color;
  span.style.fontWeight = 'bold';
  
  // ThÃªm ná»™i dung vÃ o span
  span.appendChild(fragment);
  
  // ChÃ¨n span vÃ o vá»‹ trÃ­ cÅ©
  range.insertNode(span);
  
  // XÃ³a range Ä‘Ã£ lÆ°u
  savedRanges[idx] = null;
  
  // Clear selection
  selection.removeAllRanges();
}

// Sá»± kiá»‡n lÆ°u selection khi bÃ´i Ä‘en
document.addEventListener('mouseup', function(e) {
  const sel = window.getSelection();
  if (sel.isCollapsed) return;
  
  const range = sel.getRangeAt(0);
  const readingBlock = findAncestor(range.commonAncestorContainer, el => 
    el.classList && el.classList.contains('reading-comprehension')
  );
  
  if (readingBlock) {
    const idx = parseInt(readingBlock.getAttribute('data-index'));
    savedRanges[idx] = range.cloneRange();
  }
});
// HÃ m xÃ³a táº¥t cáº£ highlight trong block
function removeHighlights(idx) {
  const readingBlock = document.querySelector(`.reading-comprehension[data-index="${idx}"]`);
  if (!readingBlock) return;

  // Láº¥y táº¥t cáº£ span highlight
  const highlightedSpans = readingBlock.querySelectorAll('span[style*="color:"]');
  
  // XÃ³a Ä‘á»‡ quy tá»« trong ra ngoÃ i
  highlightedSpans.forEach(span => {
    // LÆ°u ná»™i dung bÃªn trong
    const content = document.createDocumentFragment();
    while (span.firstChild) {
      content.appendChild(span.firstChild);
    }
    
    // Thay tháº¿ span báº±ng ná»™i dung
    const parent = span.parentNode;
    parent.insertBefore(content, span);
    parent.removeChild(span);
  });
  
  // Xá»­ lÃ½ cÃ¡c span cÃ²n sÃ³t láº¡i (náº¿u cÃ³)
  const remainingSpans = readingBlock.querySelectorAll('span[style*="color:"]');
  if (remainingSpans.length > 0) {
    removeHighlights(idx); // Gá»i Ä‘á»‡ quy náº¿u cÃ²n span
  }
}


// HÃ m helper tÃ¬m ancestor
function findAncestor(el, fn) {
  while (el) {
    if (fn(el)) return el;
    el = el.parentNode;
  }
  return null;
}
    // Láº¯ng nghe mouseup Ä‘á»ƒ lÆ°u selection náº¿u trong reading-content, giá»¯ highlight xanh
    document.addEventListener('mouseup', function(e) {
      const sel = window.getSelection();
      if (sel.isCollapsed) return;
      const range = sel.getRangeAt(0);
      const ancestry = findAncestor(range.commonAncestorContainer, el => 
        el.classList && el.classList.contains('reading-content')
      );
      if (!ancestry) return;
      const readingBlock = ancestry.closest('.reading-comprehension');
      if (!readingBlock) return;
      const idx = parseInt(readingBlock.getAttribute('data-index'));
      // LÆ°u táº¡m range, khÃ´ng clear selection Ä‘á»ƒ giá»¯ highlight native mÃ u xanh
      savedRanges[idx] = range.cloneRange();
    });

    function findAncestor(el, fn) {
      while (el) {
        if (fn(el)) return el;
        el = el.parentNode;
      }
      return null;
    }

    /***=== CÃC CHá»¨C NÄ‚NG QUIZ & TIMER CHUNG ===***/
    function submitQuiz() {
    const form = document.getElementById('quizForm');
    let score = 0;
    let totalQuestions = 0;
    let correctAnswers = 0;
    
    // TÃ­nh tá»•ng sá»‘ cÃ¢u há»i vÃ  kiá»ƒm tra Ä‘Ã¡p Ã¡n
    quizData.forEach((q, index) => {
        if (q.isReading && q.subQuestions) {
            // Xá»­ lÃ½ cÃ¢u há»i Ä‘á»c hiá»ƒu cÃ³ nhiá»u cÃ¢u há»i phá»¥
            q.subQuestions.forEach((subQ, subIndex) => {
                totalQuestions++;
                const name = `q${index + 1}_${subIndex}`;
                const selected = form.querySelector(`input[name='${name}']:checked`);
                const correct = (window.answers && window.answers[name]) || quizAnswers[name];
                
                if (selected && selected.value === correct) {
                    correctAnswers++;
                    // Chá»‰ Ä‘Ã¡nh dáº¥u âœ… cho cÃ¢u tráº£ lá»i Ä‘Ãºng
                    selected.parentElement.innerHTML += ' <span class="correct-answer">âœ… ÄÃºng</span>';
                } else if (selected) {
                    // Chá»‰ Ä‘Ã¡nh dáº¥u âŒ cho cÃ¢u tráº£ lá»i sai (khÃ´ng hiá»ƒn thá»‹ Ä‘Ã¡p Ã¡n Ä‘Ãºng)
                    selected.parentElement.innerHTML += ' <span class="wrong-answer">âŒ Sai</span>';
                    
                    // LÆ°u cÃ¢u sai vÃ o localStorage
                  const questionText = subQ.subQuestion;
                  saveWrongAnswer(name, questionText, selected.value, correct);
                }

            });
        } else {
            totalQuestions++;
            const name = `q${index + 1}`;
            const selected = form.querySelector(`input[name='${name}']:checked`);
            const correct = (window.answers && window.answers[name]) || quizAnswers[name];
            
            if (selected && selected.value === correct) {
                correctAnswers++;
                // Chá»‰ Ä‘Ã¡nh dáº¥u âœ… cho cÃ¢u tráº£ lá»i Ä‘Ãºng
                selected.parentElement.innerHTML += ' <span class="correct-answer">âœ… ÄÃºng</span>';
            } else if (selected) {
                // Chá»‰ Ä‘Ã¡nh dáº¥u âŒ cho cÃ¢u tráº£ lá»i sai (khÃ´ng hiá»ƒn thá»‹ Ä‘Ã¡p Ã¡n Ä‘Ãºng)
                selected.parentElement.innerHTML += ' <span class="wrong-answer">âŒ Sai</span>';
                   // LÆ°u cÃ¢u sai vÃ o localStorage
                const questionText = q.question;
                saveWrongAnswer(name, questionText, selected.value, correct);
            }
        }
    });

    // TÃ­nh Ä‘iá»ƒm vÃ  hiá»ƒn thá»‹ káº¿t quáº£
    const percentage = Math.round((correctAnswers / totalQuestions) * 100);
    const resultComment = getResultComment(percentage);
    
    // LÆ°u káº¿t quáº£ vÃ o localStorage
    const testId = window.location.pathname.split("/").pop().replace(".html", "");
    let testScores = JSON.parse(localStorage.getItem("testScores") || "{}");
    testScores[testId] = { score: correctAnswers, total: totalQuestions };
    localStorage.setItem("testScores", JSON.stringify(testScores));
    
    // Gá»­i káº¿t quáº£ vá» trang chÃ­nh (náº¿u cÃ³)
    try {
        if (window.opener && !window.opener.closed) {
            window.opener.postMessage({ 
                type: 'updateScore', 
                testId: testId,
                score: correctAnswers,
                total: totalQuestions
            }, '*');
        }
    } catch (e) {
        console.log("KhÃ´ng thá»ƒ gá»­i thÃ´ng bÃ¡o Ä‘áº¿n trang chÃ­nh");
    }
    
    // Hiá»ƒn thá»‹ káº¿t quáº£
    document.getElementById('popupScore').textContent = `${correctAnswers}/${totalQuestions} (${percentage}%)`;
    document.getElementById('popupComment').innerHTML = resultComment;
    document.getElementById('resultPopup').style.display = 'block';
    
    document.getElementById('quizResult').innerHTML = `
        <p><strong>Káº¿t quáº£:</strong> ${correctAnswers}/${totalQuestions} (${percentage}%)</p>
        <p><strong>Nháº­n xÃ©t:</strong> ${resultComment}</p>
    `;
    
    // LÆ°u lá»‹ch sá»­ lÃ m bÃ i
    saveQuizHistory(correctAnswers, percentage);
    
    // Hiá»ƒn thá»‹ nÃºt "Hiá»‡n Ä‘Ã¡p Ã¡n Ä‘Ãºng"
    document.getElementById('showAnswersBtn').style.display = 'block';
    
    // VÃ´ hiá»‡u hÃ³a táº¥t cáº£ input
    form.querySelectorAll('input').forEach(input => {
        input.disabled = true;
    });
    
    // Dá»«ng timer
    stopTimer();
}


    // HÃ m toggle thanh trÃ¡i
    function toggleLeftControls() {
        const container = document.getElementById('leftControlsContainer');
        container.classList.toggle('collapsed');
        localStorage.setItem('leftControlsCollapsed', container.classList.contains('collapsed'));
    }

    // Khá»Ÿi táº¡o
    window.addEventListener('DOMContentLoaded', function() {
        // Thanh trÃ¡i
        const isLeftCollapsed = localStorage.getItem('leftControlsCollapsed') === 'true';
        if (isLeftCollapsed) {
            document.getElementById('leftControlsContainer').classList.add('collapsed');
        }
        
        // Thanh pháº£i (giá»¯ nguyÃªn)
        const isRightCollapsed = localStorage.getItem('quizControlsCollapsed') === 'true';
        if (isRightCollapsed) {
            document.getElementById('quizControlsContainer').classList.add('collapsed');
        }
    });
//HÃ m thu gá»n thanh Ná»™p bÃ i, lÃ m láº¡i
  //HÃ m khá»Ÿi táº¡o Ä‘á»ƒ máº·c Ä‘á»‹nh lÃ  má»Ÿ rá»™ng
  // Sá»­a hÃ m khá»Ÿi táº¡o Ä‘á»ƒ máº·c Ä‘á»‹nh lÃ  má»Ÿ rá»™ng
window.addEventListener('DOMContentLoaded', function() {
    const isCollapsed = localStorage.getItem('quizControlsCollapsed') === 'true';
    const container = document.getElementById('quizControlsContainer');
    
    // Máº·c Ä‘á»‹nh khÃ´ng thu gá»n
    if (isCollapsed) {
        container.classList.add('collapsed');
    } else {
        container.classList.remove('collapsed');
        // Äáº£m báº£o localStorage cÃ³ giÃ¡ trá»‹ máº·c Ä‘á»‹nh
        localStorage.setItem('quizControlsCollapsed', 'false');
    }
});
  
      function toggleControls() {
          const container = document.getElementById('quizControlsContainer');
          container.classList.toggle('collapsed');
          
          // LÆ°u tráº¡ng thÃ¡i vÃ o localStorage
          const isCollapsed = container.classList.contains('collapsed');
          localStorage.setItem('quizControlsCollapsed', isCollapsed);
      }

      // Khá»Ÿi táº¡o tráº¡ng thÃ¡i tá»« localStorage khi táº£i trang
      window.addEventListener('DOMContentLoaded', function() {
          const isCollapsed = localStorage.getItem('quizControlsCollapsed') === 'true';
          if (isCollapsed) {
              document.getElementById('quizControlsContainer').classList.add('collapsed');
          }
      });



    function closeResultPopup() {
      document.getElementById('resultPopup').style.display = 'none';
    }

    function showCorrectAnswers() {
    quizData.forEach((q, idx) => {
        if (q.isReading && q.subQuestions) {
            q.subQuestions.forEach((subQ, subIdx) => {
                const name = `q${idx + 1}_${subIdx}`;
                const correct = (window.answers && window.answers[name]) || quizAnswers[name];
                const labels = document.querySelectorAll(`input[name='${name}']`);
                
                labels.forEach(input => {
                    const label = input.parentElement;
                    // Hiá»ƒn thá»‹ âœ… cho táº¥t cáº£ Ä‘Ã¡p Ã¡n Ä‘Ãºng (ká»ƒ cáº£ cÃ¢u bá» trá»‘ng hoáº·c sai)
                    if (input.value === correct && !label.innerHTML.includes('âœ… ÄÃºng')) {
                        label.innerHTML += ' <span class="correct-answer">âœ… ÄÃ¡p Ã¡n Ä‘Ãºng</span>';
                    }
                });
            });
        } else {
            const name = `q${idx + 1}`;
            const correct = (window.answers && window.answers[name]) || quizAnswers[name];
            const labels = document.querySelectorAll(`input[name='${name}']`);
            
            labels.forEach(input => {
                const label = input.parentElement;
                if (input.value === correct && !label.innerHTML.includes('âœ… ÄÃºng')) {
                    label.innerHTML += ' <span class="correct-answer">âœ… ÄÃ¡p Ã¡n Ä‘Ãºng</span>';
                }
            });
        }
    });
    // VÃ´ hiá»‡u hÃ³a nÃºt sau khi nháº¥n
    document.getElementById('showAnswersBtn').disabled = true;
}



    function getResultComment(percentage) {
      if (percentage >= 90) return "ç´ æ™´ã‚‰ã—ã„ã„ã„ã„";
      if (percentage >= 70) return "ã„ã„ã­ï¼";
      if (percentage >= 50) return "ã„ã„ã‚ˆãƒ¼";
      return "å¤§ä¸ˆå¤«ã€é ‘å¼µã‚Œï¼";
    }

    function saveQuizHistory(score, percentage) {
      const list = document.getElementById('quizHistory');
      const time = new Date().toLocaleTimeString();
      const li = document.createElement('li');
      li.innerHTML = `
        ${time}: ${score}/${Object.keys(quizAnswers).length} (${percentage}%)
        <button onclick="this.parentElement.remove()">âŒ</button>
      `;
      list.prepend(li);
    }

    function resetQuiz() {
      const form = document.getElementById('quizForm');
      form.reset();
      // Dá»«ng háº¿t timer reading trÆ°á»›c khi render láº¡i
      Object.values(readingTimers).forEach(obj => {
        if (obj.intervalId) clearInterval(obj.intervalId);
      });
      renderQuiz();
      closeResultPopup();
      document.getElementById('quizResult').innerHTML = '';
      document.getElementById('showAnswersBtn').style.display = 'none';

      showAnswersBtn.disabled = false;
      resetTimer();
    }
    
      function findKeyBySubQNumber(number) {
        for (let i = 0; i < quizData.length; i++) {
            const q = quizData[i];
            if (!q.isReading) {
                if (q.number == number) return `q${i+1}`;
            } else if (q.subQuestions) {
                for (let j = 0; j < q.subQuestions.length; j++) {
                    const subQ = q.subQuestions[j];
                    if (subQ.number == number) return `q${i+1}_${j}`;
                }
            }
        }
        return null;
    }


    function updateAnswer() {
    let keyOrNumber = document.getElementById("editKey").value.trim();
    const value = document.getElementById("editValue").value.trim();
    if (!window.answers) window.answers = {};

    // Náº¿u nháº­p sá»‘, tá»± Ä‘á»™ng dÃ² key theo subQ.number
    if (/^\d+$/.test(keyOrNumber)) {
        const mappedKey = findKeyBySubQNumber(keyOrNumber);
        if (!mappedKey) {
            alert(`âŒ KhÃ´ng tÃ¬m tháº¥y cÃ¢u há»i sá»‘ ${keyOrNumber}!`);
            return;
        }
        keyOrNumber = mappedKey;
    }

    if (keyOrNumber && value) {
        window.answers[keyOrNumber] = value;
        localStorage.setItem('customAnswers', JSON.stringify(window.answers));
        alert(`âœ… ÄÃ¡p Ã¡n cá»§a ${keyOrNumber} Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t thÃ nh ${value}.`);
    }
}


// HÃ m xá»­ lÃ½ khi nháº¥n "XÃ³a cáº­p nháº­t Ä‘Ã¡p Ã¡n"
function clearUpdatedAnswers() {
  // hiá»‡n há»™p thoáº¡i native confirm vá»›i hai nÃºt OK/Cancel
  const ok = confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a cáº­p nháº­t Ä‘Ã¡p Ã¡n khÃ´ng?');
  if (!ok) return;
  // náº¿u chá»n "OK" (tÆ°Æ¡ng Ä‘Æ°Æ¡ng "CÃ³")
  // xoÃ¡ toÃ n bá»™ Ä‘Ã¡p Ã¡n Ä‘Ã£ lÆ°u trong localStorage
  localStorage.removeItem('customAnswers');
  // náº¿u báº¡n lÆ°u version data, cÃ³ thá»ƒ cÅ©ng xoÃ¡ luÃ´n
  // localStorage.removeItem('quizDataVersion');
  // reset biáº¿n lÆ°u phÃ­a trang
  window.answers = {};
  alert('âœ… ÄÃ£ xÃ³a háº¿t cÃ¡c cáº­p nháº­t Ä‘Ã¡p Ã¡n.');
}

// gáº¯n listener vÃ o nÃºt má»›i
document.getElementById('clearAnswersBtn')
        .addEventListener('click', clearUpdatedAnswers);



    function setTimer() {
      const inputMinutes = parseInt(document.getElementById('setTimeInput').value);
      if (!isNaN(inputMinutes) && inputMinutes > 0) {
        defaultTime = inputMinutes;
        remainingTime = defaultTime * 60;
        updateTimerDisplay();
        alert(`ÄÃ£ Ä‘áº·t thá»i gian lÃ m bÃ i lÃ  ${defaultTime} phÃºt`);
      } else {
        alert('Nháº­p cho Ä‘Ãºng coi nÃ o');
      }
    }

    function startTimer() {
      if (isTimerRunning) return;
      isTimerRunning = true;
      timerInterval = setInterval(() => {
        remainingTime--;
        updateTimerDisplay();
        if (remainingTime <= 0) {
          stopTimer();
          document.getElementById('timeUpAlert').style.display = 'block';
          setTimeout(() => {
            document.getElementById('timeUpAlert').style.display = 'none';
          }, 3000);
        }
      }, 1000);
    }

    function stopTimer() {
      clearInterval(timerInterval);
      isTimerRunning = false;
    }

    function resetTimer() {
      stopTimer();
      remainingTime = defaultTime * 60;
      updateTimerDisplay();
    }

    function updateTimerDisplay() {
      const minutes = Math.floor(remainingTime / 60);
      const seconds = remainingTime % 60;
      document.getElementById('timerDisplay').textContent = 
        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }
    // LÆ°u cÃ¢u sai vÃ o localStorage
    function saveWrongAnswer(questionKey, questionText, userAnswer, correctAnswer) {
        let wrongAnswers = JSON.parse(localStorage.getItem('wrongAnswers') || '[]');
        
        const wrongAnswer = {
            id: Date.now() + Math.random(), // ID duy nháº¥t
            questionKey: questionKey,
            questionText: questionText,
            userAnswer: userAnswer,
            correctAnswer: correctAnswer,
            timestamp: new Date().toLocaleString('vi-VN')
        };
        
        wrongAnswers.push(wrongAnswer);
        localStorage.setItem('wrongAnswers', JSON.stringify(wrongAnswers));
    }

      // Hiá»ƒn thá»‹ danh sÃ¡ch cÃ¢u sai
      // Hiá»ƒn thá»‹ danh sÃ¡ch cÃ¢u sai trong popup toÃ n mÃ n hÃ¬nh
function showWrongAnswers() {
    const wrongAnswers = JSON.parse(localStorage.getItem('wrongAnswers') || '[]');
    
    if (wrongAnswers.length === 0) {
        alert('ChÆ°a cÃ³ cÃ¢u nÃ o sai ğŸ‰');
        return;
    }
    
    // Táº¡o popup toÃ n mÃ n hÃ¬nh
    const popup = document.createElement('div');
    popup.id = 'wrongAnswersPopup';
    popup.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.8);
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        box-sizing: border-box;
    `;
    
    // Táº¡o ná»™i dung popup
    const content = document.createElement('div');
    content.style.cssText = `
        background: white;
        width: 95%;
        max-width: 1200px;
        height: 90%;
        border-radius: 10px;
        padding: 20px;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    `;
    
    let tableHTML = `
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #f44336; padding-bottom: 10px;">
            <h2 style="color: #f44336; margin: 0;">ğŸ“‹ Danh sÃ¡ch cÃ¢u Ä‘Ã£ sai (${wrongAnswers.length} cÃ¢u)</h2>
            <button onclick="closeWrongAnswersPopup()" style="background: #f44336; color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer; font-weight: bold;">Ã—</button>
        </div>
        <div style="margin-bottom: 15px;">
            <button onclick="clearAllWrongAnswers()" style="background: #ff9800; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-right: 10px;">ğŸ—‘ï¸ XÃ³a táº¥t cáº£</button>
            <button onclick="exportWrongAnswers()" style="background: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">ğŸ“¤ Xuáº¥t danh sÃ¡ch</button>
        </div>
        <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <thead>
                <tr style="background: #f44336; color: white;">
                    <th style="padding: 15px 10px; text-align: center; font-weight: bold; width: 5%;">STT</th>
                    <th style="padding: 15px 10px; text-align: left; font-weight: bold; width: 45%;">CÃ¢u há»i</th>
                    <th style="padding: 15px 10px; text-align: center; font-weight: bold; width: 12%;">ÄÃ¡p Ã¡n cá»§a báº¡n</th>
                    <th style="padding: 15px 10px; text-align: center; font-weight: bold; width: 12%;">ÄÃ¡p Ã¡n Ä‘Ãºng</th>
                    <th style="padding: 15px 10px; text-align: center; font-weight: bold; width: 15%;">Thá»i gian</th>
                    <th style="padding: 15px 10px; text-align: center; font-weight: bold; width: 8%;">Key</th>
                    <th style="padding: 15px 10px; text-align: center; font-weight: bold; width: 8%;">XÃ³a</th>
                </tr>
            </thead>
            <tbody>
    `;
    
    wrongAnswers.forEach((item, index) => {
        const rowColor = index % 2 === 0 ? '#f9f9f9' : 'white';
        tableHTML += `
            <tr style="background: ${rowColor};" onmouseover="this.style.background='#ffebee'" onmouseout="this.style.background='${rowColor}'">
                <td style="padding: 12px 10px; text-align: center; border-bottom: 1px solid #eee; font-weight: bold;">${index + 1}</td>
                <td style="padding: 12px 10px; border-bottom: 1px solid #eee; line-height: 1.4; text-align: left;">${item.questionText}</td>
                <td style="padding: 12px 10px; text-align: center; border-bottom: 1px solid #eee; font-weight: bold; color: #f44336; font-size: 16px;">${item.userAnswer}</td>
                <td style="padding: 12px 10px; text-align: center; border-bottom: 1px solid #eee; font-weight: bold; color: #4CAF50; font-size: 16px;">${item.correctAnswer}</td>
                <td style="padding: 12px 10px; text-align: center; border-bottom: 1px solid #eee; font-size: 12px; color: #666;">${item.timestamp}</td>
                <td style="padding: 12px 10px; text-align: center; border-bottom: 1px solid #eee; font-size: 11px; color: #999; font-family: monospace;">${item.questionKey}</td>
                <td style="padding: 12px 10px; text-align: center; border-bottom: 1px solid #eee;">
                    <button onclick="removeWrongAnswer(${item.id})" style="background: #f44336; color: white; border: none; border-radius: 4px; padding: 6px 10px; cursor: pointer; font-size: 12px;">âŒ XÃ³a</button>
                </td>
            </tr>
        `;
    });
    
    tableHTML += `
            </tbody>
        </table>
        <div style="margin-top: 20px; text-align: center; color: #666; font-size: 14px;">
            ğŸ’¡ Tip: Nháº¥n vÃ o nÃºt "Luyá»‡n táº­p" Ä‘á»ƒ Ã´n láº¡i nhá»¯ng cÃ¢u Ä‘Ã£ sai
        </div>
    `;
    
    content.innerHTML = tableHTML;
    popup.appendChild(content);
    document.body.appendChild(popup);
    
    // ÄÃ³ng popup khi click outside
    popup.addEventListener('click', function(e) {
        if (e.target === popup) {
            closeWrongAnswersPopup();
        }
    });
}

// ÄÃ³ng popup cÃ¢u sai
function closeWrongAnswersPopup() {
    const popup = document.getElementById('wrongAnswersPopup');
    if (popup) {
        popup.remove();
    }
}

// XÃ³a táº¥t cáº£ cÃ¢u sai (tá»« popup)
function clearAllWrongAnswers() {
    if (confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a táº¥t cáº£ lá»‹ch sá»­ cÃ¢u sai?')) {
        localStorage.removeItem('wrongAnswers');
        closeWrongAnswersPopup();
        alert('âœ… ÄÃ£ xÃ³a táº¥t cáº£ lá»‹ch sá»­ cÃ¢u sai');
    }
}

// Xuáº¥t danh sÃ¡ch cÃ¢u sai
function exportWrongAnswers() {
    const wrongAnswers = JSON.parse(localStorage.getItem('wrongAnswers') || '[]');
    if (wrongAnswers.length === 0) {
        alert('KhÃ´ng cÃ³ cÃ¢u sai nÃ o Ä‘á»ƒ xuáº¥t!');
        return;
    }
    
    let exportText = 'ğŸ“‹ DANH SÃCH CÃ‚U ÄÃƒ SAI\n';
    exportText += '================================\n\n';
    
    wrongAnswers.forEach((item, index) => {
        exportText += `${index + 1}. ${item.questionText}\n`;
        exportText += `   ÄÃ¡p Ã¡n cá»§a báº¡n: ${item.userAnswer}\n`;
        exportText += `   ÄÃ¡p Ã¡n Ä‘Ãºng: ${item.correctAnswer}\n`;
        exportText += `   Thá»i gian: ${item.timestamp}\n`;
        exportText += `   Key: ${item.questionKey}\n\n`;
    });
    
    // Táº¡o file vÃ  download
    const blob = new Blob([exportText], { type: 'text/plain;charset=utf-8' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `cau-sai-${new Date().toISOString().slice(0,10)}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    window.URL.revokeObjectURL(url);
}

// XÃ³a má»™t cÃ¢u sai cá»¥ thá»ƒ (cáº­p nháº­t popup)
function removeWrongAnswer(id) {
    if (confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a cÃ¢u nÃ y?')) {
        let wrongAnswers = JSON.parse(localStorage.getItem('wrongAnswers') || '[]');
        wrongAnswers = wrongAnswers.filter(item => item.id !== id);
        localStorage.setItem('wrongAnswers', JSON.stringify(wrongAnswers));
        
        // ÄÃ³ng popup cÅ© vÃ  má»Ÿ láº¡i popup má»›i
        closeWrongAnswersPopup();
        setTimeout(() => showWrongAnswers(), 100);
    }
}


// XÃ³a táº¥t cáº£ cÃ¢u sai (tá»« thanh Ä‘iá»u khiá»ƒn trÃ¡i)
function clearWrongAnswers() {
    if (confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a táº¥t cáº£ lá»‹ch sá»­ cÃ¢u sai?')) {
        localStorage.removeItem('wrongAnswers');
        const wrongAnswersList = document.getElementById('wrongAnswersList');
        wrongAnswersList.classList.add('hidden');
        alert('âœ… ÄÃ£ xÃ³a táº¥t cáº£ lá»‹ch sá»­ cÃ¢u sai');
    }
}

    window.addEventListener('scroll', function() {
      const timerContainer = document.querySelector('.timer-container');
      const scrollY = window.scrollY;
      if (scrollY > 100) {
        timerContainer.style.opacity = '0.9';
        timerContainer.style.transform = 'scale(0.95)';
      } else {
        timerContainer.style.opacity = '1';
        timerContainer.style.transform = 'scale(1)';
      }
    });

    window.onload = function() {
      renderQuiz();
      updateTimerDisplay();
    };



  function updateDarkModeButton(isDark) {
  const btn = document.getElementById('darkModeToggleBtn');
  if (!btn) return;

  if (isDark) {
    btn.textContent = 'â˜€ï¸ Light Mode';
  } else {
    btn.textContent = 'ğŸŒ™ Dark Mode';
  }
}

function applyDarkMode(isDark) {
  document.body.classList.toggle('dark', isDark);
  localStorage.setItem('darkMode', isDark ? '1' : '0');
  updateDarkModeButton(isDark);
}

function toggleDarkMode() {
  const isDark = !document.body.classList.contains('dark');
  applyDarkMode(isDark);
}





// Tá»± Ä‘á»™ng nhá»› tráº¡ng thÃ¡i khi reload trang
window.addEventListener('DOMContentLoaded', function () {
  const saved = localStorage.getItem('darkMode');
  const isDark = saved === '1';
  applyDarkMode(isDark);
});


  </script>
    <script>
// Quáº£n lÃ½ audio player - PhiÃªn báº£n cáº£i tiáº¿n
document.addEventListener('DOMContentLoaded', function() {
    // Sá»­ dá»¥ng event delegation Ä‘á»ƒ xá»­ lÃ½ cÃ¡c audio player
    document.body.addEventListener('play', function(e) {
        if (e.target.tagName === 'AUDIO' && e.target.classList.contains('quiz-audio')) {
            // Dá»«ng táº¥t cáº£ audio khÃ¡c
            const allAudios = document.querySelectorAll('audio.quiz-audio');
            allAudios.forEach(audio => {
                if (audio !== e.target) {
                    audio.pause();
                    audio.currentTime = 0;
                }
            });
        }
    }, true);
});
</script>
</body>
</html>
